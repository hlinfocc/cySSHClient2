import{Q as Se,d as T,J as P,p as X,a as B,$ as R,b as x,c as Te,ah as Pe,ai as j,ac as K,ad as xe,aj as De,k as c,ak as Ne,M as ze}from"./index-a1dd1e86.js";import{B as L,H as I,I as V,Q as W,M as Z,N as $,O as b,$ as ee,l as A,T as He,V as ce,U as Ue,J as k,X as Ge,R as H,W as Ye,Y as Je}from"./pinia-5d85bb97.js";import{v as Qe}from"./index-7f2dd367.js";const Xe=({api:e,props:t,state:a})=>(r={},l={})=>{const o=Object.keys(r),i=Object.keys(l).filter(s=>!o.includes(s));e.clearValidate(i),a.fields.forEach(s=>{s.removeValidateEvents(),s.addValidateEvents()}),t.validateOnRuleChange&&e.validate(()=>{})},Ke=({state:e})=>()=>{if(!e.potentialLabelWidthArr.length)return"0";const t=Math.max(...e.potentialLabelWidthArr);return t?`${t}px`:""},Ze=({props:e,designConfig:t})=>()=>{var a,r;return(r=(a=e.hideRequiredAsterisk)!=null?a:t==null?void 0:t.hideRequiredAsterisk)!=null?r:!1},et=({props:e,designConfig:t})=>()=>{var a,r,l;return(l=(r=e.validateIcon)!=null?r:(a=t==null?void 0:t.icons)==null?void 0:a.validateIcon)!=null?l:null},tt=({props:e,designConfig:t})=>()=>e.messageType?e.messageType==="inline":typeof e.inlineMessage=="boolean"?e.inlineMessage:(t==null?void 0:t.messageType)==="inline"||!1,at=({props:e,designConfig:t})=>()=>e.messageType?e.messageType==="block":(t==null?void 0:t.messageType)==="block"||!1,rt=({parent:e,state:t})=>()=>{e.$on("form:addField",a=>{a&&t.fields.push(a)}),e.$on("form:removeField",a=>{a.prop&&t.fields.splice(t.fields.indexOf(a),1)})},lt=({props:e,state:t})=>()=>{e.model&&t.fields.forEach(a=>{a.resetField()})},it=({props:e,state:t})=>()=>{e.model&&t.fields.forEach(a=>{a.updateTip()})},nt=e=>(t=[])=>{let a;t.length?a=typeof t=="string"?e.fields.filter(r=>t===r.prop):e.fields.filter(r=>r.prop&&t.includes(r.prop)):a=e.fields,a.forEach(r=>{r.clearValidate()})},ot=({props:e,state:t})=>a=>{if(!e.model)return;let r;typeof a!="function"&&window.Promise&&(r=new window.Promise((i,s)=>{a=d=>{d?i(d):s(d)}}));let l=!0,o=0;t.fields.length===0&&a&&a(!0);let n={};if(t.fields.forEach(i=>{i.validate("",(s,d)=>{s&&(l=!1),n=Se({},n,d),typeof a=="function"&&++o===t.fields.length&&a(l,n)})}),r)return r},st=e=>(t,a)=>{t=[].concat(t);const r=e.fields.filter(l=>t.includes(l.prop));r.length&&r.forEach(l=>{l.validate("",a)})},dt=e=>t=>{const a=e.potentialLabelWidthArr.indexOf(t);if(a===-1)throw new Error("unpected width ",t);return a},ut=({api:e,state:t})=>(a,r)=>{if(a&&r){const l=e.getLabelWidthIndex(r);t.potentialLabelWidthArr.splice(l,1,a)}else a&&t.potentialLabelWidthArr.push(a)},ft=({api:e,state:t})=>a=>{const r=e.getLabelWidthIndex(a);t.potentialLabelWidthArr.splice(r,1)},pt=({api:e,dialog:t,state:a})=>{let r=()=>{};if(t){const l=(n=!0)=>{n?e.resetFields():e.clearValidate()},o=()=>{a.timer||(a.timer=window.setTimeout(()=>{a.timer=0,e.updateTip()},10))};t.state.emitter.on("boxclose",l),t.state.emitter.on("boxdrag",o),r=()=>{t.state.emitter.off("boxclose",l),t.state.emitter.off("boxdrag",o)}}return r},mt=({vm:e,state:t})=>(a,r)=>{const l=e.$refs.tooltip;l.state.referenceElm=a,l.state.popperElm&&(l.state.popperElm.style.display="none"),l.doDestroy(),t.tooltipVisible=!0,t.displayedValue=r,setTimeout(l.updatePopper,20)},ct=({state:e})=>()=>{e.tooltipVisible=!1},te=["state","resetFields","clearValidate","validate","validateField","getLabelWidthIndex","registerLabelWidth","deregisterLabelWidth","updateTip","showTooltip","hideTooltip"],ae=(e,{computed:t,inject:a,provide:r,reactive:l,watch:o,onBeforeUnmount:n},{vm:i,parent:s,designConfig:d})=>{const u={},y=a("dialog",null),f=l({showAutoWidth:e.showAutoWidth,fields:[],timer:0,tooltipVisible:!1,displayedValue:"",potentialLabelWidthArr:[],autoLabelWidth:t(()=>u.computedAutoLabelWidth()),hideRequiredAsterisk:t(()=>u.computedHideRequiredAsterisk()),validateIcon:t(()=>u.computedValidateIcon()),isErrorInline:t(()=>u.computedIsErrorInline()),isErrorBlock:t(()=>u.computedIsErrorBlock()),isDisplayOnly:t(()=>e.displayOnly),hasRequired:t(()=>e.rules?Object.values(e.rules).find(m=>Array.isArray(m)?m.some(E=>E.required):m.required):!1),labelWidth:t(()=>{var m;return e.labelWidth||((m=d==null?void 0:d.state)==null?void 0:m.labelWidth)||"80px"}),tooltipType:t(()=>{var m;return((m=d==null?void 0:d.state)==null?void 0:m.tooltipType)||"normal"})});Object.assign(u,{state:f,updateTip:it({props:e,state:f}),computedAutoLabelWidth:Ke({state:f}),computedHideRequiredAsterisk:Ze({props:e,designConfig:d}),computedValidateIcon:et({props:e,designConfig:d}),computedIsErrorInline:tt({props:e,designConfig:d}),computedIsErrorBlock:at({props:e,designConfig:d}),created:rt({parent:s,state:f}),resetFields:lt({props:e,state:f}),clearValidate:nt(f),validate:ot({props:e,state:f}),validateField:st(f),getLabelWidthIndex:dt(f),registerLabelWidth:ut({api:u,state:f}),deregisterLabelWidth:ft({api:u,state:f}),watchRules:Xe({api:u,props:e,state:f}),showTooltip:mt({vm:i,state:f}),hideTooltip:ct({state:f})}),u.created(),r("form",s),r("showAutoWidth",f.showAutoWidth);const F=pt({api:u,dialog:y,state:f});return n(F),o(()=>e.rules,u.watchRules),u};function vt(e,t){var a=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a)return(a=a.call(e)).next.bind(a);if(Array.isArray(e)||(a=bt(e))||t&&e&&typeof e.length=="number"){a&&(e=a);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bt(e,t){if(e){if(typeof e=="string")return ve(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return ve(e,t)}}function ve(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var yt=function(t,a){for(var r=t.__vccOpts||t,l=vt(a),o;!(o=l()).done;){var n=o.value,i=n[0],s=n[1];r[i]=s}return r},ht=T({components:{TinyTooltip:P},props:[].concat(X,["validateOnRuleChange","hideRequiredAsterisk","model","rules","inlineMessage","messageType","statusIcon","labelPosition","labelAlign","showMessage","size","disabled","labelWidth","contentOffset","labelSuffix","inline","responsiveLayout","validateType","validateIcon","manual","appendToBody","popperOptions","displayOnly","showAutoWidth","showEmptyValue","validateTag","overflowTitle"]),setup:function(t,a){return B({props:t,context:a,renderless:ae,api:te})}});function gt(e,t,a,r,l,o){var n=L("tiny-tooltip");return I(),V("form",{class:b(["tiny-form",[e.labelPosition?"tiny-form--label-"+e.labelPosition:"",{"tiny-form--inline":e.inline},{"label-align":e.labelAlign},{"has-required":e.state.hasRequired},{"asterisk-form":e.labelPosition==="top"&&!e.state.hideRequiredAsterisk},{"is-display-only":e.state.isDisplayOnly}]]),onSubmit:t[1]||(t[1]=ee(function(){},["prevent"]))},[W(e.$slots,"default"),e.overflowTitle?(I(),Z(n,{key:0,ref:"tooltip",modelValue:e.state.tooltipVisible,"onUpdate:modelValue":t[0]||(t[0]=function(i){return e.state.tooltipVisible=i}),manual:!0,effect:"light",content:e.state.displayedValue,placement:"top"},null,8,["modelValue","content"])):$("v-if",!0)],34)}var be=yt(ht,[["render",gt]]);function It(e,t){var a=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a)return(a=a.call(e)).next.bind(a);if(Array.isArray(e)||(a=St(e))||t&&e&&typeof e.length=="number"){a&&(e=a);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function St(e,t){if(e){if(typeof e=="string")return ye(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return ye(e,t)}}function ye(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var Tt=function(t,a){for(var r=t.__vccOpts||t,l=It(a),o;!(o=l()).done;){var n=o.value,i=n[0],s=n[1];r[i]=s}return r},wt=T({props:[].concat(X,["validatePosition","validateOnRuleChange","hideRequiredAsterisk","model","rules","inlineMessage","messageType","statusIcon","labelPosition","labelAlign","showMessage","size","disabled","labelWidth","contentOffset","labelSuffix","inline","responsiveLayout","validateType","validateIcon","manual"]),setup:function(t,a){return B({props:t,context:a,renderless:ae,api:te})}});function Ot(e,t,a,r,l,o){return I(),V("form",{class:b(["tiny-mobile-form",[e.labelPosition?"tiny-mobile-form--label-"+e.labelPosition:"",{"tiny-mobile-form--inline":e.inline},{"label-align":e.labelAlign}]]),onSubmit:t[0]||(t[0]=ee(function(){},["prevent"]))},[W(e.$slots,"default")],34)}var Mt=Tt(wt,[["render",Ot]]);function At(e,t){var a=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a)return(a=a.call(e)).next.bind(a);if(Array.isArray(e)||(a=$t(e))||t&&e&&typeof e.length=="number"){a&&(e=a);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $t(e,t){if(e){if(typeof e=="string")return he(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return he(e,t)}}function he(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var Vt=function(t,a){for(var r=t.__vccOpts||t,l=At(a),o;!(o=l()).done;){var n=o.value,i=n[0],s=n[1];r[i]=s}return r},Wt=T({components:{TinyTooltip:P},provide:function(){return{TinyMode:"mobile-first"}},props:[].concat(X,["validateOnRuleChange","hideRequiredAsterisk","model","rules","inlineMessage","messageType","statusIcon","labelPosition","showMessage","size","disabled","labelWidth","contentOffset","labelSuffix","inline","responsiveLayout","validateType","validateIcon","manual","appendToBody","popperOptions","displayOnly","showEmptyValue"]),setup:function(t,a){return B({props:t,context:a,renderless:ae,api:te})}});function Bt(e,t,a,r,l,o){var n=L("tiny-tooltip");return I(),V("form",{"data-tag":"tiny-form",class:b(["w-full overflow-hidden",{"overflow-x-visible":e.labelPosition==="top"&&!e.hideRequiredAsterisk,"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":e.inline}]),onSubmit:t[1]||(t[1]=ee(function(){},["prevent"]))},[W(e.$slots,"default"),e.displayOnly?(I(),Z(n,{key:0,ref:"tooltip",modelValue:e.state.tooltipVisible,"onUpdate:modelValue":t[0]||(t[0]=function(i){return e.state.tooltipVisible=i}),"popper-class":"absolute",manual:!0,effect:"light",content:e.state.displayedValue,placement:"top"},null,8,["modelValue","content"])):$("v-if",!0)],34)}var Ft=Vt(Wt,[["render",Bt]]);function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},G.apply(this,arguments)}var Et=function(t){var a,r=typeof process=="object"?(a={})==null?void 0:a.TINY_MODE:null;return(r||t)==="pc"?be:(r||t)==="mobile"?Mt:(r||t)==="mobile-first"?Ft:be},_t=G({},R,{model:Object,rules:Object,inlineMessage:{type:Boolean,default:void 0},messageType:String,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validatePosition:{type:String,default:"right"},size:String,disabled:Boolean,validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:{type:Boolean,default:void 0},labelPosition:{type:String,default:"right",validator:function(t){return["left","top","right"].includes(t)}},labelWidth:{type:String,default:""},labelAlign:{type:Boolean,default:!1},contentOffset:Number,labelSuffix:{type:String,default:""},inline:{type:Boolean,default:!1},responsiveLayout:{type:Boolean,default:!1},validateType:{type:String,default:"tip",validator:function(t){return!!~["tip","text"].indexOf(t)}},validateIcon:Object,manual:{type:Boolean,default:!1},appendToBody:{type:Boolean,default:void 0},popperOptions:{type:Object,default:function(){return{}}},displayOnly:{type:Boolean,default:!1},showAutoWidth:{type:Boolean,default:!1},showEmptyValue:{type:Boolean,default:!0},validateTag:{type:Boolean,default:!1},overflowTitle:{type:Boolean,default:!1}}),C=T({name:x+"Form",componentName:"Form",props:_t,setup:function(t,a){return Te({props:t,context:a,template:Et})}}),Lt="3.15.0";C.install=function(e){e.component(C.name,C)};C.version=Lt;const Rt=e=>t=>{!Pe(t)&&e.getValidateType==="tip"&&(e.canShowTip=!0),e.validateMessage=t,e.validateState=t?j.Error:""},kt=e=>t=>{e.validateState=t},jt=({props:e,state:t})=>()=>e.validateType||(t.formInstance?t.formInstance.validateType:""),Ct=({props:e,state:t})=>()=>{var a,r,l,o;return(o=(l=e.validateIcon)!=null?l:(r=(a=t==null?void 0:t.formInstance)==null?void 0:a.state)==null?void 0:r.validateIcon)!=null?o:null},qt=({props:e,state:t})=>()=>{var a,r,l;return e.messageType?e.messageType==="inline":typeof e.inlineMessage=="boolean"?e.inlineMessage:(l=(r=(a=t==null?void 0:t.formInstance)==null?void 0:a.state)==null?void 0:r.isErrorInline)!=null?l:!1},Pt=({props:e,state:t})=>()=>{var a,r,l;return e.messageType?e.messageType==="block":(l=(r=(a=t==null?void 0:t.formInstance)==null?void 0:a.state)==null?void 0:r.isErrorBlock)!=null?l:!1},xt=({props:e,state:t})=>()=>{const a={width:""};if(t.form.labelPosition===K.Top)return a;const r=e.labelWidth||t.form.state.labelWidth;return r&&(a.width=r),a},Dt=({props:e,state:t})=>()=>{const a={width:""};if(t.form.labelPosition===K.Top)return a.width="100%",a;const r=e.labelWidth||t.form.state.labelWidth;return r&&(r==="auto"?a.width=r:a.width=`calc(100% - ${r})`),a},Nt=({props:e,state:t})=>()=>{const a={},r=e.label;if(t.form.labelPosition===K.Top||t.form.inline||!r&&!e.labelWidth&&t.isNested)return a;const l=e.labelWidth||t.form.state.labelWidth;return l==="auto"?e.labelWidth==="auto"?a.marginLeft=t.computedLabelWidth:t.form.state.labelWidth==="auto"&&(a.marginLeft=t.formInstance.state.autoLabelWidth):a.marginLeft=l,a},zt=({constants:e,vm:t,state:a})=>()=>{var r,l,o;const{FORM_NAME:n,FORM_ITEM_NAME:i}=e;let s=(r=t.$parent)==null?void 0:r.$parent,d=(l=s==null?void 0:s.$options)==null?void 0:l.componentName;for(;s&&d!==n;)d===i&&(a.isNested=!0),s=s==null?void 0:s.$parent,d=(o=s==null?void 0:s.$options)==null?void 0:o.componentName;return s},Ht=({api:e,state:t})=>()=>{if(t.validationRequired)return!0;let a=e.getRules(),r=!1;return a&&a.length&&a.every(l=>l.required?(r=!0,!1):!0),r},re=(e,t,a)=>{let r=e;t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,"");let l=0,o=t.split(".");for(let n=o.length;l<n-1&&!(!r&&!a);++l){let i=o[l];if(r&&i in r)r=r[i];else{if(a)throw new Error("[Tiny Form] please transfer a valid prop path to form item!");break}}return{o:r,k:o[l],v:r?r[o[l]]:null}},Ut=({props:e,state:t})=>()=>{const a=t.form.model;if(!a||!e.prop)return;let r=e.prop;return r.includes(":")&&(r=r.replace(/:/,".")),re(a,r,!0).v},Gt=({api:e,vm:t,props:a,state:r})=>()=>{if(r.tooltip=t.$refs.tooltip,a.prop){e.dispatch("Form","form:addField",t);let l=r.fieldValue;Array.isArray(l)&&(l=[].concat(l)),r.initialValue=l,e.addValidateEvents()}},Yt=({api:e,vm:t,state:a})=>()=>{a.canShowTip=!1,e.dispatch("Form","form:removeField",t)},Jt=({api:e,props:t,state:a,t:r})=>(l,o=()=>{})=>{a.validateDisabled=!1;const n=e.getFilteredRule(l);if((!n||n.length===0)&&t.required===void 0||t.validateDisabled){o();return}a.validateState=j.Validating;const i={};n&&n.length>0&&n.forEach(u=>{delete u.trigger}),i[t.prop||""]=n;const s=new Qe(i,r),d={};d[t.prop||""]=a.fieldValue,s.validate(d,{firstFields:!0},(u,y)=>{e.clearValidate(),(()=>{a.validateState=u?j.Error:j.Success,u&&t.error&&(u[0].message=t.error),a.validateMessage=u?u[0].message:"",a.canShowTip=!!u,o(a.validateMessage,y),a.formInstance&&a.formInstance.$emit("validate",t.prop,!u,a.validateMessage||null)})()})},Qt=e=>()=>{e.validateState="",e.validateMessage="",e.validateDisabled=!1},Xt=({api:e,nextTick:t,props:a,state:r})=>()=>{r.getValidateType==="tip"&&(r.canShowTip=!1),r.validateState="",r.validateMessage="";let l=r.form.model||{},o=r.fieldValue,n=a.prop||"";n&&n.includes(":")&&(n=n.replace(/:/,"."));let i=re(l,n,!0);r.validateDisabled=!0,Array.isArray(o)?i.o[i.k]=[].concat(r.initialValue):i.o[i.k]=r.initialValue,t(()=>{r.validateDisabled=!1}),setTimeout(()=>r.validateState&&(r.validateState="")),e.broadcast("timeSelect","fieldReset",r.initialValue)},Kt=({props:e,state:t})=>()=>{let a=t.form.rules||{};const r=e.rules,l=e.required!==void 0?{required:!!e.required}:[],o=re(a,e.prop||"");return a=a?o.o[e.prop||""]||o.v:[],[].concat(r||a||[]).concat(l)},Zt=e=>t=>e.getRules().filter(r=>!r.trigger||t===""?!0:Array.isArray(r.trigger)?r.trigger.includes(t):r.trigger===t).map(r=>Se({},r)),ea=e=>()=>{e.validate("blur")},ta=({api:e,state:t})=>()=>{if(t.validateDisabled){t.validateDisabled=!1;return}e.validate("change")},aa=e=>t=>{e.computedLabelWidth=t?`${t}px`:""},ra=({api:e,vm:t,props:a,state:r})=>()=>{(e.getRules().length||a.required!==void 0)&&(a.manual||r.formInstance&&r.formInstance.manual||(t.$on("form.blur",e.onFieldBlur),t.$on("form.change",e.onFieldChange)))},la=e=>()=>{e.$off()},ia=({vm:e,state:t})=>()=>{if(t.getValidateType!=="tip"&&!t.canShowTip)return;const a=e.$refs.tooltip;a&&a.updatePopper()},na=({validateFunc:e,props:t})=>t.validateDebounce?xe(500,e):e,oa=({state:e})=>t=>{if(!e.isDisplayOnly||!e.typeName||!e.form)return;const a=t.target,r=a.textContent,l=window.getComputedStyle(a).font,o=a.getBoundingClientRect();let n={},i=!1;["text","password","number"].includes(e.typeName)&&(n=De(r,l,o.width)),e.typeName==="textarea"&&a&&a.scrollHeight>a.offsetHeight&&(i=!0),(n.o||i)&&e.form.showTooltip(a,e.displayedValue)},sa=({props:e,state:t,slots:a})=>r=>{if(!t.form.overflowTitle||!t.form||a.label)return;const l=r.target;l&&l.scrollWidth>l.offsetWidth&&t.form.showTooltip(l,e.label+t.form.labelSuffix)},da=e=>()=>{e.form&&e.form.hideTooltip()},ua=({state:e})=>t=>{e.formInstance.displayOnly&&(e.typeName=t.type,e.isBasicComp=!0,e.displayedValue=t.val)},fa=({state:e})=>()=>{e.typeName="",e.isBasicComp=!1,e.displayedValue=""},we=["state","validate","clearValidate","resetField","getRules","getFilteredRule","onFieldBlur","onFieldChange","updateComputedLabelWidth","addValidateEvents","removeValidateEvents","updateTip","getDisplayedValue","handleLabelMouseenter","handleMouseenter","handleMouseleave"],pa=({reactive:e,computed:t,api:a,mode:r,inject:l,props:o})=>{const n=e({mode:r,validateState:"",validateMessage:"",validateDisabled:!1,validator:{},isNested:!1,computedLabelWidth:"",initialValue:null,canShowTip:!1,validationRequired:!1,validateType:"text",tooltip:"",displayedValue:"",isBasicComp:!1,showTooltip:!1,typeName:"",formInstance:l("form"),labelFor:t(()=>o.for||o.prop||""),labelStyle:t(()=>a.computedLabelStyle()),valueStyle:t(()=>a.computedValueStyle()),contentStyle:t(()=>a.computedContentStyle()),form:t(()=>a.computedForm()),fieldValue:t(()=>a.computedFieldValue()),isRequired:t(()=>a.computedIsRequired()),formInline:t(()=>n.formInstance.inline),formSize:t(()=>n.formInstance.size),formItemSize:t(()=>o.size||n.formSize),isDisplayOnly:t(()=>n.formInstance.displayOnly),labelPosition:t(()=>n.formInstance.labelPosition),hideRequiredAsterisk:t(()=>n.formInstance.state.hideRequiredAsterisk),labelSuffix:t(()=>n.formInstance.labelSuffix),labelWidth:t(()=>n.formInstance.labelWidth),showMessage:t(()=>n.formInstance.showMessage),sizeClass:t(()=>n.formItemSize),getValidateType:t(()=>a.computedGetValidateType()),validateIcon:t(()=>a.computedValidateIcon()),isErrorInline:t(()=>a.computedIsErrorInline()),isErrorBlock:t(()=>a.computedIsErrorBlock()),disabled:t(()=>n.formInstance.disabled),tooltipType:t(()=>n.formInstance.state.tooltipType)});return n},ma=({api:e,state:t,dispatch:a,broadcast:r,props:l,constants:o,vm:n,t:i,nextTick:s,slots:d})=>{Object.assign(e,{state:t,dispatch:a,broadcast:r,watchError:Rt(t),updateTip:ia({vm:n,state:t}),watchValidateStatus:kt(t),computedLabelStyle:xt({props:l,state:t}),computedValueStyle:Dt({props:l,state:t}),computedContentStyle:Nt({props:l,state:t}),computedForm:zt({constants:o,vm:n,state:t}),computedFieldValue:Ut({props:l,state:t}),computedGetValidateType:jt({props:l,state:t}),computedValidateIcon:Ct({props:l,state:t}),computedIsErrorInline:qt({props:l,state:t}),computedIsErrorBlock:Pt({props:l,state:t}),clearValidate:Qt(t),getRules:Kt({props:l,state:t}),updateComputedLabelWidth:aa(t),removeValidateEvents:la(n),unmounted:Yt({api:e,vm:n,state:t}),mounted:Gt({api:e,vm:n,props:l,state:t}),computedIsRequired:Ht({api:e,state:t}),resetField:Xt({api:e,nextTick:s,props:l,state:t}),getFilteredRule:Zt(e),onFieldBlur:ea(e),onFieldChange:ta({api:e,state:t}),addValidateEvents:ra({api:e,vm:n,props:l,state:t}),validate:na({validateFunc:Jt({api:e,props:l,state:t,t:i}),props:l}),getDisplayedValue:ua({state:t}),clearDisplayedValue:fa({state:t}),handleLabelMouseenter:sa({props:l,state:t,slots:d}),handleMouseenter:oa({state:t}),handleMouseleave:da(t)})},ca=({watch:e,api:t,props:a,state:r})=>{e(()=>a.error,t.watchError,{immediate:!0}),e(()=>a.validateStatus,t.watchValidateStatus),e(()=>r.formInstance.displayOnly,t.clearDisplayedValue)},Oe=(e,{computed:t,inject:a,onMounted:r,onUnmounted:l,provide:o,reactive:n,watch:i},{vm:s,constants:d,t:u,nextTick:y,broadcast:f,dispatch:F,mode:m,slots:E})=>{const g={},w=pa({reactive:n,computed:t,api:g,mode:m,inject:a,props:e});return o("formItem",s),ma({api:g,state:w,dispatch:F,broadcast:f,props:e,constants:d,vm:s,t:u,nextTick:y,slots:E}),ca({watch:i,api:g,props:e,state:w}),r(g.mounted),s.$on("displayed-value-changed",D=>{g.getDisplayedValue(D)}),l(g.unmounted),g};function Y(){return Y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Y.apply(this,arguments)}var Me=T({props:Y({},R,{isAutoWidth:Boolean,updateAll:Boolean,isMobile:Boolean,isMobileFirst:Boolean}),inject:["form","formItem"],render:function(){var t=this.slots.default&&this.slots.default(),a=this.isMobile?"tiny-mobile-":"tiny-";if(!t)return null;if(this.isAutoWidth){var r=this.form.autoLabelWidth,l={};if(r&&r!=="auto"){var o=parseInt(r,10)-this.computedWidth;o&&(l.marginLeft=o+"px")}return c("div",{class:this.isMobileFirst?"float-left":a+"form-item_label-wrap",style:l},t)}else return t[0]},methods:{getLabelWidth:function(){var t=function(l){return window.getComputedStyle(l).width},a=function(l){return Math.ceil(parseFloat(l))};return!this.$el||!this.$el.firstElementChild?0:a(t(this.$el.firstElementChild))},updateLabelWidth:function(t){var a=this;if(t===void 0&&(t="update"),!(!this.$slots.default||!this.isAutoWidth||!this.$el.firstElementChild)){var r=function(){return a.computedWidth=a.getLabelWidth()},l=function(){return a.form.deregisterLabelWidth(a.computedWidth)};t==="update"?r():t==="remove"&&l()}}},watch:{computedWidth:function(t,a){this.updateAll&&(this.form.registerLabelWidth(t,a),this.formItem.updateComputedLabelWidth(t))}},setup:function(t,a){var r=function(n,i,s){var d=i.onMounted,u=i.onUpdated,y=i.onBeforeUnmount,f=s.vm;return d(function(){return f.updateLabelWidth("update")}),u(function(){return f.updateLabelWidth("update")}),y(function(){return f.updateLabelWidth("remove")}),{computedWidth:0}},l=["computedWidth"];return B({props:t,context:a,renderless:r,api:l})}});function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},q.apply(this,arguments)}var va={FORM_NAME:"Form",FORM_ITEM_NAME:"FormItem"},ge=T({name:x+"FormItem",componentName:"FormItem",components:{LabelWrap:Me,Tooltip:P},props:q({},R,{_constants:{type:Object,default:function(){return va}},appendToBody:{type:Boolean,default:void 0},error:String,for:String,inlineMessage:{type:Boolean,default:void 0},messageType:String,label:String,labelWidth:String,manual:Boolean,popperOptions:{type:Object,default:function(){return{}}},prop:String,required:{type:Boolean,default:void 0},rules:[Object,Array],showMessage:{type:Boolean,default:!0},size:String,validateDisabled:Boolean,validateDebounce:Boolean,validatePosition:String,validateStatus:String,validateType:String,validateIcon:{type:Object,default:null},ellipsis:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},extra:String}),setup:function(t,a){return B({props:t,context:a,renderless:Oe,api:we})},render:function(){var t=this,a,r,l,o,n,i=this.state,s=this.required,d=this.slots,u=this.label,y=this.scopedSlots,f=this.showMessage;this.inlineMessage;var F=this.ellipsis,m=this.vertical,E=this.handleLabelMouseenter,g=this.handleMouseleave,w=i.validateIcon,D=i.isErrorInline,Ae=i.isErrorBlock,$e=i.tooltipType,h=i.mode==="mobile",p=h?"tiny-mobile-":"tiny-",le=d.label?d.label():null,ie=d.default?d.default():null,N=y.error&&y.error(i.validateMessage),Ve=p+"form-item--"+(i.sizeClass?i.sizeClass:"default"),ne=i.validateState==="error"&&f&&i.form.showMessage;i.formInstance&&i.formInstance.validateTag;var oe,_=ie?ie.map(function(de){var v=Ne(de);v.props=v.props||{};var S=v.type;if(Object.assign(v.props,{size:i.formItemSize,mini:i.formItemSize==="mini"}),S&&S.name&&S.name.toLowerCase().endsWith("button"))return v;var O=v.props;return O&&(i.isRequired||(i.validationRequired=O.validation&&!!O.validation.required),O.validation)?v:h?c("div",{class:p+"form-item__value",style:i.valueStyle},[v]):v}):null,We=function(){if(h){var v=t.validatePosition||i.formInstance.validatePosition||"right";return oe=i.validateMessage?v==="right"?A("div",{class:"tiny-mobile-input-form__error align-right"},[i.validateMessage]):A("div",{class:"tiny-mobile-input-form__error align-left"},[i.validateMessage]):null,_}var S=_.length>1?c("div",{class:"tiny-form-item__content-muti-children"},_):_[0];if(!t.showMessage)return S;var O=i.formInstance&&i.formInstance.appendToBody,ue=typeof t.appendToBody=="boolean"?t.appendToBody:typeof O=="boolean"?O:!0,_e=t.validatePosition||i.formInstance&&i.formInstance.validatePosition||"top-end",Le=q({},i.formInstance.popperOptions,t.popperOptions,{forceAbsolute:!ue,onUpdate:function(M){var pe=M.instance._popper,ke=pe.style.transform,me=ke.match(/translate3d\((\w+)px, (\w+)px, (\w+)px\)/);if(Array.isArray(me)){var z=me.slice(1),je=z[0],Ce=z[1],qe=z[2];pe.style.transform="translate3d("+je+"px, "+parseInt(Ce,10)+"px, "+qe+"px)"}}}),Re=w?c(w,{class:"tooltip-validate-icon"}):null;return c("tooltip",{props:{popperClass:p+"form__valid",arrowOffset:0,adjustArrow:!0,type:$e,disabled:i.getValidateType!=="tip",placement:_e,manual:!0,appendToBody:ue,popperOptions:Le,modelValue:ne?i.canShowTip:!1,zIndex:"relative",renderContent:function(){var M;return N?M=[N]:M=[Re,A("span",{class:p+"form-item__validate-message"},[i.validateMessage])],M}},on:{"update:modelValue":function(M){i.canShowTip=M}},ref:"tooltip"},[S.type===He?A("span",null,[S]):S])},Be=_?We():null,Fe=ne&&i.getValidateType==="text"?N||c("div",{class:(a={},a[p+"form-item__error"]=!0,a[p+"form-item__error--inline"]=D,a[p+"form-item__error--block"]=Ae,a),attrs:{title:[i.validateMessage]}},[w?c(w,{class:"validate-icon"}):null,A("span",{class:p+"form-item__validate-message"},[i.validateMessage])]):null,se=c("label-wrap",{props:{isAutoWidth:i.labelStyle&&i.labelStyle.width==="auto",updateAll:i.form.labelWidth==="auto",isMobile:i.mode==="mobile"}},[le||u?c("label",{class:(r={},r[p+"form-item__label"]=!0,r["is-ellipsis"]=h&&F,r),style:i.labelStyle,attrs:{for:i.labelFor},on:{mouseenter:E,mouseleave:g}},le||u+i.form.labelSuffix):null]),Ee=this.extra?c("div",{class:(l={},l[p+"form-item__extra-tip"]=!0,l)},this.extra):null;return c("div",{class:(o={},o[p+"form-item"]=!0,o[p+"form-item--feedback"]=i.formInstance&&i.formInstance.statusIcon,o["is-error"]=i.validateState==="error",o["is-text"]=i.getValidateType==="text",o["is-validating"]=i.validateState==="validating",o["is-success"]=i.validateState==="success",o["is-required"]=i.isRequired||s,o["is-no-asterisk"]=i.hideRequiredAsterisk,o[Ve]=!0,o)},[h?null:se,c("div",{class:(n={},n[p+"form-item__content"]=!0,n["is-vertical"]=h&&m,n),style:!h&&i.contentStyle},[h?se:null,Be,h?oe:null,c("transition",{attrs:{name:p+"zoom-in-top"}},[Fe]),h?null:Ee])])}});function ba(e,t){var a=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a)return(a=a.call(e)).next.bind(a);if(Array.isArray(e)||(a=ya(e))||t&&e&&typeof e.length=="number"){a&&(e=a);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ya(e,t){if(e){if(typeof e=="string")return Ie(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ie(e,t)}}function Ie(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var ha=function(t,a){for(var r=t.__vccOpts||t,l=ba(a),o;!(o=l()).done;){var n=o.value,i=n[0],s=n[1];r[i]=s}return r};function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},J.apply(this,arguments)}var ga={FORM_NAME:"Form",FORM_ITEM_NAME:"FormItem"},Ia=T({name:x+"FormItem",componentName:"FormItem",components:{LabelWrap:Me,TinyTooltip:P,IconHelpCircle:ze()},props:J({},R,{_constants:{type:Object,default:function(){return ga}},appendToBody:{type:Boolean,default:void 0},error:String,for:String,inlineMessage:{type:[String,Boolean],default:""},label:String,labelWidth:String,manual:Boolean,popperOptions:{type:Object,default:function(){return{}}},prop:String,required:{type:Boolean,default:void 0},rules:[Object,Array],showMessage:{type:Boolean,default:!0},size:String,tipContent:String,validateDisabled:Boolean,validateDebounce:Boolean,validatePosition:String,validateStatus:String,validateType:String}),setup:function(t,a){return B({props:t,context:a,renderless:Oe,api:we})}}),Sa=["for"],Ta=["type-name"],wa=["title"];function Oa(e,t,a,r,l,o){var n=L("icon-help-circle"),i=L("tiny-tooltip"),s=L("label-wrap");return I(),V("div",{"data-tag":"tiny-form-item",class:b(e.m("flex min-h-[theme(spacing.12)] sm:min-h-[theme(spacing.7)] mb-0 p-0 sm:mb-4 box-border after:content-[''] after:table after:clear-both before:content-['']  before:table border-b-0.5 border-color-border-separator sm:border-none",e.state.validateState==="error"&&e.state.validateType==="text"?"mb-0 sm:mb-5":"",e.state.formInline?"align-sub":"",e.state.labelPosition==="top"?"block mb-4":"",e.state.validateState==="error"?"[&_.tiny-range-editor]:border-color-error [&_[data-tag~=tiny-range-editor]]:border-color-error [&_[data-tag=tiny-numeric-main]]:border-color-error [&_input]:border-color-error [&_textarea]:border-color-error [&_input:focus]:border-color-error [&_input:hover]:border-color-error [&_textarea:focus]:border-color-error [&_textarea:hover]:border-color-error":"",e.state.labelPosition==="top"&&!e.state.hideRequiredAsterisk?"pl-0":"",!e.slots.label&&!e.label?"border-none":"",e.state.isDisplayOnly?"border-none py-0.5":""))},[A(s,{"is-auto-width":e.state.labelStyle&&e.state.labelStyle.width==="auto","update-all":e.state.labelWidth==="auto","is-mobile-first":!0},{default:ce(function(){return[e.slots.label||e.label?(I(),V("label",{key:0,"data-tag":"tiny-item-label",class:b(e.m("py-3 sm:py-1.5 sm:min-h-[theme(spacing.7)] relative align-bottom float-left text-sm pr-3 sm:pr-4 box-border leading-5","overflow-hidden text-ellipsis",e.state.labelPosition==="top"?"float-none inline-block text-left sm:text-left leading-none px-0 pt-0 pb-1.5 h-auto min-h-0 sm:py-0 sm:pb-0.5 sm:min-h-[theme(spacing.0)]":"min-h-[theme(spacing.9)]",e.state.labelPosition==="right"?"text-right sm:text-right":"",e.state.labelPosition==="left"?"text-left sm:text-left":"",e.state.formInline&&e.state.labelPosition==="top"?"block":"",e.state.isDisplayOnly?"leading-none h-auto align-[inherit] pr-4":"",e.tipContent?"pr-5 sm:pr-7":"",e.state.labelPosition==="top"&&!e.state.hideRequiredAsterisk?"overflow-visible relative before:absolute before:-left-2.5":"",e.state.disabled?"text-color-icon-placeholder sm:text-color-text-secondary":"text-color-text-secondary",e.state.formItemSize==="medium"?"sm:text-sm":"sm:text-xs")),style:Ue(e.state.labelStyle),for:e.state.labelFor},[k("span",{class:b(e.m("max-h-[theme(spacing.10)] line-clamp-2 inline-block relative top-px pl-2 sm:pl-0 leading-normal",(e.state.isRequired||e.required)&&!e.state.hideRequiredAsterisk?"before:content-['*'] before:text-color-error before:absolute before:left-0 before:sm:relative":"",e.state.isDisplayOnly?"pl-0 before:hidden":""))},[W(e.$slots,"label",{},function(){return[Ge(H(e.label+e.state.labelSuffix),1)]})],2),e.tipContent?(I(),Z(i,{key:0,effect:"light",content:e.tipContent,placement:"top"},{default:ce(function(){return[A(n,{"custom-class":"h-4 w-4 ml-0.5 absolute right-1 sm:right-2 align-text-bottom fill-color-text-secondary",class:b([e.state.labelPosition==="top"?"top-0.5 sm:top-1.5":"top-3.5 sm:top-1.5"])},null,8,["class"])]}),_:1},8,["content"])):$("v-if",!0)],14,Sa)):$("v-if",!0)]}),_:3},8,["is-auto-width","update-all"]),k("div",{"data-tag":"tiny-form-item-inline",class:b(e.m("flex-1 m-0 sm:m-auto relative sm:pt-0 sm:top-auto text-sm after:content-['']  after:table after:clear-both before:content-['']  before:table [&_button:not(:last-child)]:mr-2","[&_[data-tag=tiny-checkbox]]:py-0 [&_[data-tag=tiny-input]]:w-full","[&_[data-tag=tiny-input]_textarea]:px-0 sm:[&_[data-tag=tiny-input]_textarea]:px-3 [&_[data-tag=tiny-input]_textarea]:w-full [&_[data-tag=tiny-input]_textarea]:pt-1 sm:[&_[data-tag=tiny-input]_textarea]:pt-2",e.state.formInline?"align-sub leading-none":"",e.state.labelPosition==="top"&&!e.state.hideRequiredAsterisk?e.state.isDisplayOnly?"pl-0":"pl-2 sm:pl-0":"pt-2",e.state.formItemSize==="medium"?"sm:text-sm":"sm:text-xs"))},[e.state.isDisplayOnly&&e.state.isBasicComp?(I(),V("div",{key:0,"data-tag":"tiny-form-item-display-only",class:b(["break-all min-h-[28px] leading-7 text-color-text-primary",e.state.typeName==="textarea"?"line-clamp-3":"line-clamp-1"]),"type-name":e.state.typeName,onMouseenter:t[0]||(t[0]=function(){return e.handleMouseenter&&e.handleMouseenter.apply(e,arguments)}),onMouseleave:t[1]||(t[1]=function(){return e.handleMouseleave&&e.handleMouseleave.apply(e,arguments)})},H(e.state.displayedValue||"-"),43,Ta)):$("v-if",!0),Ye(k("div",{"data-tag":"tiny-form-item-show",class:b(["[&_[aria-label=checkbox-group]]:pl-0.5 sm:[&_[aria-label=checkbox-group]]:pl-0","[&_>:first-child[data-tag=tiny-checkbox]]:pl-0.5 sm:[&_>:first-child[data-tag=tiny-checkbox]]:pl-0","[&_>:first-child[data-tag=tiny-cascader]]:w-full","[&_>:first-child[class=tiny-autocomplete]]:w-full","[&_>:first-child[class=tiny-cascader]]:w-full",e.state.isDisplayOnly?"[&_>*:not([data-tag^=tiny-],[class^=tiny-])]:leading-8 [&_>*:not([data-tag^=tiny-],[class^=tiny-])]:sm:leading-normal":""])},[W(e.$slots,"default")],2),[[Je,!(e.state.isDisplayOnly&&e.state.isBasicComp)]]),e.state.validateState==="error"&&e.showMessage&&e.state.showMessage?W(e.$slots,"error",{key:1,dataTag:"tiny-form-item-error"},function(){return[k("div",{class:b(e.m(" relative sm:absolute left-0 bottom-1 sm:-bottom-5 text-color-error text-xs leading-normal line-clamp-3 sm:line-clamp-1",typeof e.inlineMessage=="boolean"&&e.inlineMessage||e.state.inlineMessage?"relative top-auto left-auto inline-block":"",e.state.formItemSize==="small"?"pt-0.5":"",e.state.formItemSize==="mini"?"pt-px":"")),title:e.state.validateMessage},H(e.state.validateMessage),11,wa)]}):$("v-if",!0)],2)],2)}var Ma=ha(Ia,[["render",Oa]]);function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Q.apply(this,arguments)}var Aa=function(t){var a,r=typeof process=="object"?(a={})==null?void 0:a.TINY_MODE:null;return(r||t)==="pc"?ge:(r||t)==="mobile-first"?Ma:ge},$a={FORM_NAME:"Form",FORM_ITEM_NAME:"FormItem"},Va=Q({},R,{_constants:{type:Object,default:function(){return $a}},appendToBody:{type:Boolean,default:void 0},error:{type:String,default:""},for:String,inlineMessage:{type:Boolean,default:void 0},messageType:String,label:String,labelWidth:String,manual:Boolean,popperOptions:{type:Object,default:function(){return{}}},prop:String,required:{type:Boolean,default:void 0},rules:[Object,Array],showMessage:{type:Boolean,default:!0},size:String,tipContent:String,validateDisabled:Boolean,validateDebounce:Boolean,validatePosition:String,validateStatus:String,validateType:String,validateIcon:Object,ellipsis:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},extra:String}),U=T({name:x+"FormItem",componentName:"FormItem",props:Va,setup:function(t,a){return Te({props:t,context:a,template:Aa})}});U.install=function(e){e.component(U.name,U)};export{U as F,C as a};
