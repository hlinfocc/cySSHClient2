import{bW as Te,d as T,S as N,p as ee,s as F,$ as k,a as z,b as we,i as xe,bX as j,aW as te,aE as Ne,b5 as ze,ac as b,y as He,bY as Ue,bZ as Ge,b_ as Ye,Z as Xe}from"./index-e603e385.js";import{B as L,H as I,I as W,P as $,L as ae,R as Ze,M as A,N as h,_ as le,F as Je,T as Qe,l as V,U as ve,S as Ke,J as q,W as et,Q as Y,V as tt,X as at}from"./pinia-940ae834.js";import{v as lt}from"./index-40d08de7.js";const it=({api:e,props:t,state:a})=>(l={},i={})=>{const r=Object.keys(l),s=Object.keys(i).filter(d=>!r.includes(d));e.clearValidate(s),a.fields.forEach(d=>{d.removeValidateEvents(),d.addValidateEvents()}),t.validateOnRuleChange&&e.validate(()=>{})},ot=({state:e})=>()=>{if(!e.potentialLabelWidthArr.length)return"0";const t=Math.max(...e.potentialLabelWidthArr);return t?`${t}px`:""},rt=({props:e,designConfig:t})=>()=>{var a,l;return(l=(a=e.hideRequiredAsterisk)!=null?a:t==null?void 0:t.hideRequiredAsterisk)!=null?l:!0},nt=({props:e,designConfig:t})=>()=>{var a,l,i;return(i=(l=e.validateIcon)!=null?l:(a=t==null?void 0:t.icons)==null?void 0:a.validateIcon)!=null?i:"icon-error"},st=({props:e,designConfig:t})=>()=>e.messageType?e.messageType==="inline":typeof e.inlineMessage=="boolean"?e.inlineMessage:(t==null?void 0:t.messageType)==="inline",dt=({props:e,designConfig:t})=>()=>e.messageType?e.messageType==="block":t&&Object.hasOwnProperty.call(t,"messageType")?t.messageType==="block":!0,ut=({parent:e,state:t})=>()=>{e.$on("form:addField",a=>{a&&t.fields.push(a)}),e.$on("form:removeField",a=>{a.prop&&t.fields.splice(t.fields.indexOf(a),1)})},pt=({props:e,state:t})=>()=>{e.model&&t.fields.forEach(a=>{a.resetField()})},ft=({props:e,state:t})=>()=>{e.model&&t.fields.forEach(a=>{a.updateTip()})},mt=e=>(t=[])=>{let a;t.length?a=typeof t=="string"?e.fields.filter(l=>t===l.prop):e.fields.filter(l=>l.prop&&t.includes(l.prop)):a=e.fields,a.forEach(l=>{l.clearValidate()})},ct=({props:e,state:t})=>a=>{if(!e.model)return;let l;typeof a!="function"&&window.Promise&&(l=new window.Promise((d,p)=>{a=u=>{u?d(u):p(u)}}));let i=!0,r=0;t.fields.length===0&&a&&a(!0);let o={},s=[];if(t.fields.forEach(d=>{d.validate("",(p,u)=>{p&&(i=!1),o=Te({},o,u),u&&Object.keys(u).forEach(n=>s.push(n)),typeof a=="function"&&++r===t.fields.length&&a(i,o,s)})}),l)return l},vt=e=>(t,a)=>{t=[].concat(t);const l=e.fields.filter(i=>t.includes(i.prop));l.length&&l.forEach(i=>{i.validate("",a)})},bt=e=>t=>{const a=e.potentialLabelWidthArr.indexOf(t);if(a===-1)throw new Error("unpected width ",t);return a},yt=({api:e,state:t})=>(a,l)=>{if(a&&l){const i=e.getLabelWidthIndex(l);t.potentialLabelWidthArr.splice(i,1,a)}else a&&t.potentialLabelWidthArr.push(a)},ht=({api:e,state:t})=>a=>{const l=e.getLabelWidthIndex(a);t.potentialLabelWidthArr.splice(l,1)},gt=({api:e,dialog:t,state:a})=>{let l=()=>{};if(t){const i=(o=!0)=>{o?e.resetFields():e.clearValidate()},r=()=>{a.timer||(a.timer=window.setTimeout(()=>{a.timer=0,e.updateTip()},10))};t.state.emitter.on("boxclose",i),t.state.emitter.on("boxdrag",r),l=()=>{t.state.emitter.off("boxclose",i),t.state.emitter.off("boxdrag",r)}}return l},It=({vm:e,state:t})=>(a,l)=>{const i=e.$refs.tooltip;i.state.referenceElm=a,i.state.popperElm&&(i.state.popperElm.style.display="none"),i.doDestroy(),t.tooltipVisible=!0,t.displayedValue=l,setTimeout(i.updatePopper,20)},St=({state:e})=>()=>{e.tooltipVisible=!1},ie=["state","resetFields","clearValidate","validate","validateField","getLabelWidthIndex","registerLabelWidth","deregisterLabelWidth","updateTip","showTooltip","hideTooltip"],oe=(e,{computed:t,inject:a,provide:l,reactive:i,watch:r,onBeforeUnmount:o},{vm:s,parent:d,designConfig:p})=>{const u={},n=a("dialog",null),m=i({showAutoWidth:e.showAutoWidth,fields:[],timer:0,tooltipVisible:!1,displayedValue:"",potentialLabelWidthArr:[],autoLabelWidth:t(()=>u.computedAutoLabelWidth()),hideRequiredAsterisk:t(()=>u.computedHideRequiredAsterisk()),validateIcon:t(()=>u.computedValidateIcon()),isErrorInline:t(()=>u.computedIsErrorInline()),isErrorBlock:t(()=>u.computedIsErrorBlock()),isDisplayOnly:t(()=>e.displayOnly),hasRequired:t(()=>e.rules?Object.values(e.rules).find(c=>Array.isArray(c)?c.some(O=>O.required):c.required):!1),labelWidth:t(()=>{var c;return e.labelWidth||((c=p==null?void 0:p.state)==null?void 0:c.labelWidth)||"84px"}),tooltipType:t(()=>{var c;return((c=p==null?void 0:p.state)==null?void 0:c.tooltipType)||"normal"})});Object.assign(u,{state:m,updateTip:ft({props:e,state:m}),computedAutoLabelWidth:ot({state:m}),computedHideRequiredAsterisk:rt({props:e,designConfig:p}),computedValidateIcon:nt({props:e,designConfig:p}),computedIsErrorInline:st({props:e,designConfig:p}),computedIsErrorBlock:dt({props:e,designConfig:p}),created:ut({parent:d,state:m}),resetFields:pt({props:e,state:m}),clearValidate:mt(m),validate:ct({props:e,state:m}),validateField:vt(m),getLabelWidthIndex:bt(m),registerLabelWidth:yt({api:u,state:m}),deregisterLabelWidth:ht({api:u,state:m}),watchRules:it({api:u,props:e,state:m}),showTooltip:It({vm:s,state:m}),hideTooltip:St({state:m})}),u.created(),l("form",d),l("showAutoWidth",m.showAutoWidth);const S=gt({api:u,dialog:n,state:m});return o(S),r(()=>e.rules,u.watchRules),u};function Tt(e,t){var a=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a)return(a=a.call(e)).next.bind(a);if(Array.isArray(e)||(a=wt(e))||t&&e&&typeof e.length=="number"){a&&(e=a);var l=0;return function(){return l>=e.length?{done:!0}:{done:!1,value:e[l++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wt(e,t){if(e){if(typeof e=="string")return be(e,t);var a={}.toString.call(e).slice(8,-1);return a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set"?Array.from(e):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?be(e,t):void 0}}function be(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,l=Array(t);a<t;a++)l[a]=e[a];return l}var Mt=function(t,a){for(var l=t.__vccOpts||t,i=Tt(a),r;!(r=i()).done;){var o=r.value,s=o[0],d=o[1];l[s]=d}return l},At=T({components:{TinyTooltip:N},props:[].concat(ee,["validateOnRuleChange","hideRequiredAsterisk","model","rules","inlineMessage","messageType","statusIcon","labelPosition","labelAlign","showMessage","size","disabled","labelWidth","contentOffset","labelSuffix","inline","responsiveLayout","validateType","validateIcon","manual","appendToBody","popperOptions","displayOnly","showAutoWidth","showEmptyValue","validateTag","overflowTitle","tooltipConfig"]),setup:function(t,a){return F({props:t,context:a,renderless:oe,api:ie})}});function $t(e,t,a,l,i,r){var o=L("tiny-tooltip");return I(),W("form",{class:h(["tiny-form",[e.labelPosition?"tiny-form--label-"+e.labelPosition:"",{"tiny-form--inline":e.inline},{"label-align":e.labelAlign},{"has-required":e.state.hasRequired},{"asterisk-form":e.labelPosition==="top"&&!e.state.hideRequiredAsterisk},{"is-display-only":e.state.isDisplayOnly}]]),onSubmit:t[1]||(t[1]=le(function(){},["prevent"]))},[$(e.$slots,"default"),e.overflowTitle?(I(),ae(o,Ze({key:0,ref:"tooltip",modelValue:e.state.tooltipVisible,"onUpdate:modelValue":t[0]||(t[0]=function(s){return e.state.tooltipVisible=s})},e.tooltipConfig,{manual:!0,effect:e.tooltipConfig.effect||"light",content:e.state.displayedValue,placement:e.tooltipConfig.placement||"top"}),null,16,["modelValue","effect","content","placement"])):A("v-if",!0)],34)}var ye=Mt(At,[["render",$t]]);function Ot(e,t){var a=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a)return(a=a.call(e)).next.bind(a);if(Array.isArray(e)||(a=Vt(e))||t&&e&&typeof e.length=="number"){a&&(e=a);var l=0;return function(){return l>=e.length?{done:!0}:{done:!1,value:e[l++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vt(e,t){if(e){if(typeof e=="string")return he(e,t);var a={}.toString.call(e).slice(8,-1);return a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set"?Array.from(e):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?he(e,t):void 0}}function he(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,l=Array(t);a<t;a++)l[a]=e[a];return l}var Wt=function(t,a){for(var l=t.__vccOpts||t,i=Ot(a),r;!(r=i()).done;){var o=r.value,s=o[0],d=o[1];l[s]=d}return l},Ft=T({props:[].concat(ee,["validatePosition","validateOnRuleChange","hideRequiredAsterisk","model","rules","inlineMessage","messageType","statusIcon","labelPosition","labelAlign","showMessage","size","disabled","labelWidth","contentOffset","labelSuffix","inline","responsiveLayout","validateType","validateIcon","manual"]),setup:function(t,a){return F({props:t,context:a,renderless:oe,api:ie})}});function Bt(e,t,a,l,i,r){return I(),W("form",{class:h(["tiny-mobile-form",[e.labelPosition?"tiny-mobile-form--label-"+e.labelPosition:"",{"tiny-mobile-form--inline":e.inline},{"label-align":e.labelAlign}]]),onSubmit:t[0]||(t[0]=le(function(){},["prevent"]))},[$(e.$slots,"default")],34)}var Et=Wt(Ft,[["render",Bt]]);function _t(e,t){var a=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a)return(a=a.call(e)).next.bind(a);if(Array.isArray(e)||(a=Lt(e))||t&&e&&typeof e.length=="number"){a&&(e=a);var l=0;return function(){return l>=e.length?{done:!0}:{done:!1,value:e[l++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lt(e,t){if(e){if(typeof e=="string")return ge(e,t);var a={}.toString.call(e).slice(8,-1);return a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set"?Array.from(e):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?ge(e,t):void 0}}function ge(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,l=Array(t);a<t;a++)l[a]=e[a];return l}var kt=function(t,a){for(var l=t.__vccOpts||t,i=_t(a),r;!(r=i()).done;){var o=r.value,s=o[0],d=o[1];l[s]=d}return l},Ct=T({components:{TinyTooltip:N},provide:function(){return{TinyMode:"mobile-first"}},props:[].concat(ee,["validateOnRuleChange","hideRequiredAsterisk","model","rules","inlineMessage","messageType","statusIcon","labelPosition","showMessage","size","disabled","labelWidth","contentOffset","labelSuffix","inline","responsiveLayout","validateType","validateIcon","manual","appendToBody","popperOptions","displayOnly","showEmptyValue","tooltipConfig"]),setup:function(t,a){return F({props:t,context:a,renderless:oe,api:ie})}});function Rt(e,t,a,l,i,r){var o=L("tiny-tooltip");return I(),W("form",{"data-tag":"tiny-form",class:h(["w-full overflow-hidden",{"overflow-x-visible":e.labelPosition==="top"&&!e.hideRequiredAsterisk,"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":e.inline}]),onSubmit:t[1]||(t[1]=le(function(){},["prevent"]))},[$(e.$slots,"default"),e.displayOnly?(I(),ae(o,{key:0,ref:"tooltip",modelValue:e.state.tooltipVisible,"onUpdate:modelValue":t[0]||(t[0]=function(s){return e.state.tooltipVisible=s}),"popper-class":e.tooltipConfig.popperClass||"absolute",manual:!0,effect:e.tooltipConfig.effect||"light",content:e.state.displayedValue,placement:e.tooltipConfig.placement||"top"},null,8,["modelValue","popper-class","effect","content","placement"])):A("v-if",!0)],34)}var Pt=kt(Ct,[["render",Rt]]);function Z(){return Z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)({}).hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},Z.apply(null,arguments)}var qt=function(t){var a,l=typeof process=="object"?(a={})==null?void 0:a.TINY_MODE:null;return(l||t)==="pc"?ye:(l||t)==="mobile"?Et:(l||t)==="mobile-first"?Pt:ye},jt=Z({},k,{model:Object,rules:Object,inlineMessage:{type:Boolean,default:void 0},messageType:String,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validatePosition:{type:String,default:"right"},size:String,disabled:Boolean,validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:{type:Boolean,default:void 0},labelPosition:{type:String,default:"right",validator:function(t){return["left","top","right"].includes(t)}},labelWidth:{type:String,default:""},labelAlign:{type:Boolean,default:!1},contentOffset:Number,labelSuffix:{type:String,default:""},inline:{type:Boolean,default:!1},responsiveLayout:{type:Boolean,default:!1},validateType:{type:String,default:"tip",validator:function(t){return!!~["tip","text"].indexOf(t)}},validateIcon:Object,manual:{type:Boolean,default:!1},appendToBody:{type:Boolean,default:void 0},popperOptions:{type:Object,default:function(){return{}}},displayOnly:{type:Boolean,default:!1},showAutoWidth:{type:Boolean,default:!1},showEmptyValue:{type:Boolean,default:!0},validateTag:{type:Boolean,default:!1},overflowTitle:{type:Boolean,default:!1},wrapFragment:{type:String,default:"div"},tooltipConfig:{type:Object,default:function(){return{}}}}),D=T({name:z+"Form",componentName:"Form",props:jt,setup:function(t,a){return we({props:t,context:a,template:qt})}}),Dt="3.19.0";D.install=function(e){e.component(D.name,D)};D.version=Dt;const xt=e=>t=>{!xe(t)&&e.getValidateType==="tip"&&(e.canShowTip=!0),e.validateMessage=t,e.validateState=t?j.Error:""},Nt=e=>t=>{e.validateState=t},zt=({props:e,state:t})=>()=>e.validateType||(t.formInstance?t.formInstance.validateType:""),Ht=({props:e,state:t})=>()=>{var a,l,i,r;return(r=(i=e.validateIcon)!=null?i:(l=(a=t==null?void 0:t.formInstance)==null?void 0:a.state)==null?void 0:l.validateIcon)!=null?r:null},Ut=({props:e,state:t})=>()=>{var a,l,i;return e.messageType?e.messageType==="inline":typeof e.inlineMessage=="boolean"?e.inlineMessage:(i=(l=(a=t==null?void 0:t.formInstance)==null?void 0:a.state)==null?void 0:l.isErrorInline)!=null?i:!1},Gt=({props:e,state:t})=>()=>{var a,l,i;return e.messageType?e.messageType==="block":(i=(l=(a=t==null?void 0:t.formInstance)==null?void 0:a.state)==null?void 0:l.isErrorBlock)!=null?i:!1},Yt=({props:e,state:t})=>()=>{const a={width:""};if(t.form.labelPosition===te.Top)return a;const l=e.labelWidth||t.form.state.labelWidth;return l&&(a.width=l),a},Xt=({props:e,state:t})=>()=>{const a={width:""};if(t.form.labelPosition===te.Top)return a.width="100%",a;const l=e.labelWidth||t.form.state.labelWidth;return l&&(l==="auto"?a.width=l:a.width=`calc(100% - ${l})`),a},Zt=({props:e,state:t})=>()=>{const a={},l=e.label;if(t.form.labelPosition===te.Top||t.form.inline||!l&&!e.labelWidth&&t.isNested)return a;const i=e.labelWidth||t.form.state.labelWidth;return i==="auto"?e.labelWidth==="auto"?a.marginLeft=t.computedLabelWidth:t.form.state.labelWidth==="auto"&&(a.marginLeft=t.formInstance.state.autoLabelWidth):a.marginLeft=i,a},Jt=({constants:e,vm:t,state:a})=>()=>{var l,i,r;const{FORM_NAME:o,FORM_ITEM_NAME:s}=e;let d=(l=t.$parent)==null?void 0:l.$parent,p=(i=d==null?void 0:d.$options)==null?void 0:i.componentName;for(;d&&p!==o;)p===s&&(a.isNested=!0),d=d==null?void 0:d.$parent,p=(r=d==null?void 0:d.$options)==null?void 0:r.componentName;return d},Qt=({api:e,state:t})=>()=>{if(t.validationRequired)return!0;let a=e.getRules(),l=!1;return a&&a.length&&a.every(i=>i.required?(l=!0,!1):!0),l},re=(e,t,a)=>{let l=e;t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,"");let i=0,r=t.split(".");for(let o=r.length;i<o-1&&!(!l&&!a);++i){let s=r[i];if(l&&s in l)l=l[s];else{if(a)throw new Error("[Tiny Form] please transfer a valid prop path to form item!");break}}return{o:l,k:r[i],v:l?l[r[i]]:null}},Kt=({props:e,state:t})=>()=>{const a=t.form.model;if(!a||!e.prop)return;let l=e.prop;return l.includes(":")&&(l=l.replace(/:/,".")),re(a,l,!0).v},ea=({api:e,vm:t,props:a,state:l})=>()=>{const i=t.$refs.tooltip;if(i){const r=t.$refs.content;i.state.referenceElm=l.isMultiple?r:r==null?void 0:r.children[0],l.tooltip=i}if(a.prop){e.dispatch("Form","form:addField",t);let r=l.fieldValue;Array.isArray(r)&&(r=[].concat(r)),l.initialValue=r,e.addValidateEvents()}},ta=({api:e,vm:t,state:a})=>()=>{a.canShowTip=!1,e.dispatch("Form","form:removeField",t)},aa=({api:e,props:t,state:a,t:l})=>(i,r=()=>{})=>{a.validateDisabled=!1;const o=e.getFilteredRule(i);if((!o||o.length===0)&&t.required===void 0||t.validateDisabled){r();return}a.validateState=j.Validating;const s={};o&&o.length>0&&o.forEach(u=>{delete u.trigger}),s[t.prop||""]=o;const d=new lt(s,l),p={};p[t.prop||""]=a.fieldValue,d.validate(p,{firstFields:!0},(u,n)=>{e.clearValidate(),(()=>{a.validateState=u?j.Error:j.Success,u&&t.error&&(u[0].message=t.error),a.validateMessage=u?u[0].message:"",a.canShowTip=!!u,r(a.validateMessage,n),a.formInstance&&a.formInstance.$emit("validate",t.prop,!u,a.validateMessage||null)})()})},la=e=>()=>{e.validateState="",e.validateMessage="",e.validateDisabled=!1},ia=({api:e,nextTick:t,props:a,state:l})=>()=>{l.getValidateType==="tip"&&(l.canShowTip=!1),l.validateState="",l.validateMessage="";let i=l.form.model||{},r=l.fieldValue,o=a.prop||"";o&&o.includes(":")&&(o=o.replace(/:/,"."));let s=re(i,o,!0);l.validateDisabled=!0,Array.isArray(r)?s.o[s.k]=[].concat(l.initialValue):s.o[s.k]=l.initialValue,t(()=>{l.validateDisabled=!1}),setTimeout(()=>l.validateState&&(l.validateState="")),e.broadcast("timeSelect","fieldReset",l.initialValue)},oa=({props:e,state:t})=>()=>{let a=t.form.rules||{};const l=e.rules,i=e.required!==void 0?{required:!!e.required}:[],r=re(a,e.prop||"");return a=a?r.o[e.prop||""]||r.v:[],[].concat(l||a||[]).concat(i)},ra=e=>t=>e.getRules().filter(l=>!l.trigger||t===""?!0:Array.isArray(l.trigger)?l.trigger.includes(t):l.trigger===t).map(l=>Te({},l)),na=e=>()=>{e.validate("blur")},sa=({api:e,state:t})=>()=>{if(t.validateDisabled){t.validateDisabled=!1;return}e.validate("change")},da=e=>t=>{e.computedLabelWidth=t?`${t}px`:""},ua=({api:e,vm:t,props:a,state:l})=>()=>{(e.getRules().length||a.required!==void 0)&&(a.manual||l.formInstance&&l.formInstance.manual||(t.$on("form.blur",e.onFieldBlur),t.$on("form.change",e.onFieldChange)))},pa=e=>()=>{e.$off()},fa=({vm:e,state:t})=>()=>{if(t.getValidateType!=="tip"&&!t.canShowTip)return;const a=e.$refs.tooltip;a&&a.updatePopper()},ma=({validateFunc:e,props:t})=>t.validateDebounce?Ne(500,e):e,ca=({state:e})=>t=>{if(!e.isDisplayOnly||!e.typeName||!e.form)return;const a=t.target,l=a.textContent,i=window.getComputedStyle(a).font,r=a.getBoundingClientRect();let o={},s=!1;["text","password","number"].includes(e.typeName)&&(o=ze(l,i,r.width)),e.typeName==="textarea"&&a&&a.scrollHeight>a.offsetHeight&&(s=!0),(o.o||s)&&e.form.showTooltip(a,e.displayedValue)},va=({props:e,state:t,slots:a})=>l=>{if(!t.form.overflowTitle||!t.form||a.label)return;const i=l.target;i&&i.scrollWidth>i.offsetWidth&&t.form.showTooltip(i,e.label+t.form.labelSuffix)},ba=e=>()=>{e.form&&e.form.hideTooltip()},ya=({state:e})=>t=>{e.formInstance.displayOnly&&(e.typeName=t.type,e.isBasicComp=!0,e.displayedValue=t.val)},ha=({state:e})=>()=>{e.typeName="",e.isBasicComp=!1,e.displayedValue=""},Me=["state","validate","clearValidate","resetField","getRules","getFilteredRule","onFieldBlur","onFieldChange","updateComputedLabelWidth","addValidateEvents","removeValidateEvents","updateTip","getDisplayedValue","handleLabelMouseenter","handleMouseenter","handleMouseleave"],ga=({reactive:e,computed:t,api:a,mode:l,inject:i,props:r})=>{const o=e({mode:l,validateState:"",validateMessage:"",validateDisabled:!1,validator:{},isNested:!1,computedLabelWidth:"",initialValue:null,canShowTip:!1,validationRequired:!1,validateType:"text",tooltip:"",displayedValue:"",isBasicComp:!1,showTooltip:!1,typeName:"",formInstance:i("form"),labelFor:t(()=>r.for||r.prop||""),labelStyle:t(()=>a.computedLabelStyle()),valueStyle:t(()=>a.computedValueStyle()),contentStyle:t(()=>a.computedContentStyle()),form:t(()=>a.computedForm()),fieldValue:t(()=>a.computedFieldValue()),isRequired:t(()=>a.computedIsRequired()),formInline:t(()=>o.formInstance.inline),formSize:t(()=>o.formInstance.size),formItemSize:t(()=>r.size||o.formSize),isDisplayOnly:t(()=>o.formInstance.displayOnly),labelPosition:t(()=>o.formInstance.labelPosition),hideRequiredAsterisk:t(()=>o.formInstance.state.hideRequiredAsterisk),labelSuffix:t(()=>o.formInstance.labelSuffix),labelWidth:t(()=>o.formInstance.labelWidth),showMessage:t(()=>o.formInstance.showMessage),sizeClass:t(()=>o.formItemSize),getValidateType:t(()=>a.computedGetValidateType()),validateIcon:t(()=>a.computedValidateIcon()),isErrorInline:t(()=>a.computedIsErrorInline()),isErrorBlock:t(()=>a.computedIsErrorBlock()),disabled:t(()=>o.formInstance.disabled),tooltipType:t(()=>o.formInstance.state.tooltipType),isMultiple:!1});return o},Ia=({api:e,state:t,dispatch:a,broadcast:l,props:i,constants:r,vm:o,t:s,nextTick:d,slots:p})=>{Object.assign(e,{state:t,dispatch:a,broadcast:l,watchError:xt(t),updateTip:fa({vm:o,state:t}),watchValidateStatus:Nt(t),computedLabelStyle:Yt({props:i,state:t}),computedValueStyle:Xt({props:i,state:t}),computedContentStyle:Zt({props:i,state:t}),computedForm:Jt({constants:r,vm:o,state:t}),computedFieldValue:Kt({props:i,state:t}),computedGetValidateType:zt({props:i,state:t}),computedValidateIcon:Ht({props:i,state:t}),computedIsErrorInline:Ut({props:i,state:t}),computedIsErrorBlock:Gt({props:i,state:t}),clearValidate:la(t),getRules:oa({props:i,state:t}),updateComputedLabelWidth:da(t),removeValidateEvents:pa(o),unmounted:ta({api:e,vm:o,state:t}),mounted:ea({api:e,vm:o,props:i,state:t}),computedIsRequired:Qt({api:e,state:t}),resetField:ia({api:e,nextTick:d,props:i,state:t}),getFilteredRule:ra(e),onFieldBlur:na(e),onFieldChange:sa({api:e,state:t}),addValidateEvents:ua({api:e,vm:o,props:i,state:t}),validate:ma({validateFunc:aa({api:e,props:i,state:t,t:s}),props:i}),getDisplayedValue:ya({state:t}),clearDisplayedValue:ha({state:t}),handleLabelMouseenter:va({props:i,state:t,slots:p}),handleMouseenter:ca({state:t}),handleMouseleave:ba(t)})},Sa=({watch:e,api:t,props:a,state:l})=>{e(()=>a.error,t.watchError,{immediate:!0}),e(()=>a.validateStatus,t.watchValidateStatus),e(()=>l.formInstance.displayOnly,t.clearDisplayedValue)},Ae=(e,{computed:t,inject:a,onMounted:l,onUnmounted:i,provide:r,reactive:o,watch:s},{vm:d,constants:p,t:u,nextTick:n,broadcast:m,dispatch:S,mode:c,slots:O})=>{const g={},C=ga({reactive:o,computed:t,api:g,mode:c,inject:a,props:e});return r("formItem",d),Ia({api:g,state:C,dispatch:S,broadcast:m,props:e,constants:p,vm:d,t:u,nextTick:n,slots:O}),Sa({watch:s,api:g,props:e,state:C}),l(g.mounted),d.$on("displayed-value-changed",H=>{g.getDisplayedValue(H)}),i(g.unmounted),g};function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)({}).hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},J.apply(null,arguments)}var $e=T({props:J({},k,{isAutoWidth:Boolean,updateAll:Boolean,isMobile:Boolean,isMobileFirst:Boolean}),inject:["form","formItem"],render:function(){var t=this.slots.default&&this.slots.default(),a=this.isMobile?"tiny-mobile-":"tiny-";if(!t)return null;if(this.isAutoWidth){var l=this.form.autoLabelWidth,i={};if(l&&l!=="auto"){var r=parseInt(l,10)-this.computedWidth;r&&(i.marginLeft=r+"px")}return b("div",{class:this.isMobileFirst?"float-left":a+"form-item_label-wrap",style:i},t)}else return t[0]},methods:{getLabelWidth:function(){var t=function(i){return window.getComputedStyle(i).width},a=function(i){return Math.ceil(parseFloat(i))};return!this.$el||!this.$el.firstElementChild?0:a(t(this.$el.firstElementChild))},updateLabelWidth:function(t){var a=this;if(t===void 0&&(t="update"),!(!this.$slots.default||!this.isAutoWidth||!this.$el.firstElementChild)){var l=function(){return a.computedWidth=a.getLabelWidth()},i=function(){return a.form.deregisterLabelWidth(a.computedWidth)};t==="update"?l():t==="remove"&&i()}}},watch:{computedWidth:function(t,a){this.updateAll&&(this.form.registerLabelWidth(t,a),this.formItem.updateComputedLabelWidth(t))}},setup:function(t,a){var l=function(o,s,d){var p=s.onMounted,u=s.onUpdated,n=s.onBeforeUnmount,m=d.vm;return p(function(){return m.updateLabelWidth("update")}),u(function(){return m.updateLabelWidth("update")}),n(function(){return m.updateLabelWidth("remove")}),{computedWidth:0}},i=["computedWidth"];return F({props:t,context:a,renderless:l,api:i})}});function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)({}).hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},x.apply(null,arguments)}var Ta={FORM_NAME:"Form",FORM_ITEM_NAME:"FormItem"},Ie=T({name:z+"FormItem",componentName:"FormItem",components:{LabelWrap:$e,Tooltip:N,IconError:He()},props:x({},k,{_constants:{type:Object,default:function(){return Ta}},appendToBody:{type:Boolean,default:void 0},error:String,for:String,inlineMessage:{type:Boolean,default:void 0},messageType:String,label:String,labelWidth:String,manual:Boolean,popperOptions:{type:Object,default:function(){return{}}},prop:String,required:{type:Boolean,default:void 0},rules:[Object,Array],showMessage:{type:Boolean,default:!0},size:String,validateDisabled:Boolean,validateDebounce:Boolean,validatePosition:String,validateStatus:String,validateType:String,validateIcon:{type:Object,default:null},ellipsis:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},extra:String}),setup:function(t,a){return F({props:t,context:a,renderless:Ae,api:Me})},render:function(){var t,a,l,i,r=this,o,s,d,p,u,n=this.state,m=this.required,S=this.slots,c=this.label,O=this.scopedSlots,g=this.showMessage;this.inlineMessage;var C=this.ellipsis,H=this.vertical,Oe=this.handleLabelMouseenter,Ve=this.handleMouseleave,R=n.validateIcon,We=n.isErrorInline,Fe=n.isErrorBlock,Be=n.tooltipType,y=n.mode==="mobile",v=y?"tiny-mobile-":"tiny-",ne=S.label?S.label():null,se=S.default?S.default():null,U=O.error&&O.error(n.validateMessage),Ee=v+"form-item--"+(n.sizeClass?n.sizeClass:"default"),de=n.validateState==="error"&&g&&n.form.showMessage;(t=n.formInstance)==null||t.validateTag;var ue=(a=n.formInstance)==null?void 0:a.wrapFragment,pe,fe=(l=n.formInstance)==null?void 0:l.appendToBody,me=typeof this.appendToBody=="boolean"?this.appendToBody:typeof fe=="boolean"?fe:!0,_e=this.validatePosition||((i=n.formInstance)==null?void 0:i.validatePosition)||"top-end",Le=x({},n.formInstance.popperOptions,this.popperOptions,{forceAbsolute:!me,onUpdate:function(f){var P=f.instance._popper,_=P.style.transform,w=_.match(/translate3d\((\w+)px, (\w+)px, (\w+)px\)/);if(Array.isArray(w)){var M=w.slice(1),G=M[0],je=M[1],De=M[2];P.style.transform="translate3d("+G+"px, "+parseInt(je,10)+"px, "+De+"px)"}}}),ke=R?b(R,{class:"tooltip-validate-icon"}):null,B=se?se.map(function(E){var f=Ye(E);f.props=f.props||{};var P=f,_=P.type;if(f.dynamicProps=f.dynamicProps||[],f.dynamicProps.includes("size")||f.dynamicProps.push("size"),Object.assign(f.props,{size:n.formItemSize,mini:n.formItemSize==="mini"||!!f.props.mini}),_&&_.name&&_.name.toLowerCase().endsWith("button"))return f;var w=f.props;if(w&&(n.isRequired||(n.validationRequired=w.validation&&!!w.validation.required),w.validation))return f;if(y)return b("div",{class:v+"form-item__value",style:n.valueStyle},[f]);f.type===Je?ue&&(f=b(ue,[f])):f.type===Qe&&(f=b("span",[f]));var M;f.props||(f.props={}),M=f.props;var G="tiny-tooltip "+Ue(M.class);return M.class=Ge(G),f}):null;n.isMultiple=(B==null?void 0:B.length)>1;var Ce=function(){if(y){var f=r.validatePosition||n.formInstance.validatePosition||"right";return pe=n.validateMessage?f==="right"?V("div",{class:"tiny-mobile-input-form__error align-right"},[n.validateMessage]):V("div",{class:"tiny-mobile-input-form__error align-left"},[n.validateMessage]):null,B}return B},Re=B?Ce():null,Pe=de&&n.getValidateType==="text"?U||b("div",{class:(o={},o[v+"form-item__error"]=!0,o[v+"form-item__error--inline"]=We,o[v+"form-item__error--block"]=Fe,o),attrs:{title:[n.validateMessage]}},[R?b(R,{class:"validate-icon"}):null,V("span",{class:v+"form-item__validate-message"},[n.validateMessage])]):null,ce=b("label-wrap",{props:{isAutoWidth:n.labelStyle&&n.labelStyle.width==="auto",updateAll:n.form.labelWidth==="auto",isMobile:n.mode==="mobile"}},[ne||c?b("label",{class:(s={},s[v+"form-item__label"]=!0,s["is-ellipsis"]=y&&C,s),style:n.labelStyle,attrs:{for:n.labelFor},on:{mouseenter:Oe,mouseleave:Ve}},ne||c+n.form.labelSuffix):null]),qe=this.extra?b("div",{class:(d={},d[v+"form-item__extra-tip"]=!0,d)},this.extra):null;return b("div",{class:(p={},p[v+"form-item"]=!0,p[v+"form-item--feedback"]=n.formInstance&&n.formInstance.statusIcon,p["is-error"]=n.validateState==="error",p["is-text"]=n.getValidateType==="text",p["is-validating"]=n.validateState==="validating",p["is-success"]=n.validateState==="success",p["is-required"]=n.isRequired||m,p["is-no-asterisk"]=n.hideRequiredAsterisk,p[Ee]=!0,p)},[y?null:ce,this.showMessage&&!y&&b("tooltip",{props:{popperClass:v+"form__valid",arrowOffset:0,adjustArrow:!0,type:Be,disabled:n.getValidateType!=="tip",placement:_e,manual:!0,appendToBody:me,popperOptions:Le,modelValue:de?n.canShowTip:!1,zIndex:"relative",renderContent:function(){var f;return U?f=[U]:f=[ke,V("span",{class:v+"form-item__validate-message"},[n.validateMessage])],f}},on:{"update:modelValue":function(f){n.canShowTip=f}},ref:"tooltip"}),b("div",{class:(u={},u[v+"form-item__content"]=!0,u["is-vertical"]=y&&H,u),style:!y&&n.contentStyle,ref:"content"},[y?ce:null,Re,y?pe:null,b("transition",{attrs:{name:v+"zoom-in-top"}},[Pe]),y?null:qe])])}});function wa(e,t){var a=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a)return(a=a.call(e)).next.bind(a);if(Array.isArray(e)||(a=Ma(e))||t&&e&&typeof e.length=="number"){a&&(e=a);var l=0;return function(){return l>=e.length?{done:!0}:{done:!1,value:e[l++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ma(e,t){if(e){if(typeof e=="string")return Se(e,t);var a={}.toString.call(e).slice(8,-1);return a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set"?Array.from(e):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Se(e,t):void 0}}function Se(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,l=Array(t);a<t;a++)l[a]=e[a];return l}var Aa=function(t,a){for(var l=t.__vccOpts||t,i=wa(a),r;!(r=i()).done;){var o=r.value,s=o[0],d=o[1];l[s]=d}return l};function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)({}).hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},Q.apply(null,arguments)}var $a={FORM_NAME:"Form",FORM_ITEM_NAME:"FormItem"},Oa=T({name:z+"FormItem",componentName:"FormItem",components:{LabelWrap:$e,TinyTooltip:N,IconHelpCircle:Xe()},props:Q({},k,{_constants:{type:Object,default:function(){return $a}},appendToBody:{type:Boolean,default:void 0},error:String,for:String,inlineMessage:{type:[String,Boolean],default:""},label:String,labelWidth:String,manual:Boolean,popperOptions:{type:Object,default:function(){return{}}},prop:String,required:{type:Boolean,default:void 0},rules:[Object,Array],showMessage:{type:Boolean,default:!0},size:String,tipContent:String,validateDisabled:Boolean,validateDebounce:Boolean,validatePosition:String,validateStatus:String,validateType:String}),setup:function(t,a){return F({props:t,context:a,renderless:Ae,api:Me})}}),Va=["for"],Wa=["type-name"],Fa=["title"];function Ba(e,t,a,l,i,r){var o=L("icon-help-circle"),s=L("tiny-tooltip"),d=L("label-wrap");return I(),W("div",{"data-tag":"tiny-form-item",class:h(e.m("flex min-h-[theme(spacing.12)] sm:min-h-[theme(spacing.7)] mb-0 p-0 sm:mb-4 box-border after:content-[''] after:table after:clear-both before:content-['']  before:table border-b-0.5 border-color-border-separator sm:border-none",e.state.validateState==="error"&&e.state.validateType==="text"?"mb-0 sm:mb-5":"",e.state.formInline?"align-sub":"",e.state.labelPosition==="top"?"block mb-4":"",e.state.validateState==="error"?"[&_.tiny-range-editor]:border-color-error [&_[data-tag~=tiny-range-editor]]:border-color-error [&_[data-tag=tiny-numeric-main]]:border-color-error [&_input]:border-color-error [&_textarea]:border-color-error [&_input:focus]:border-color-error [&_input:hover]:border-color-error [&_textarea:focus]:border-color-error [&_textarea:hover]:border-color-error":"",e.state.labelPosition==="top"&&!e.state.hideRequiredAsterisk?"pl-0":"",!e.slots.label&&!e.label?"border-none":"",e.state.isDisplayOnly?"border-none py-0.5":""))},[V(d,{"is-auto-width":e.state.labelStyle&&e.state.labelStyle.width==="auto","update-all":e.state.labelWidth==="auto","is-mobile-first":!0},{default:ve(function(){return[e.slots.label||e.label?(I(),W("label",{key:0,"data-tag":"tiny-item-label",class:h(e.m("py-3 sm:py-1.5 sm:min-h-[theme(spacing.7)] relative align-bottom float-left text-sm pr-3 sm:pr-4 box-border leading-5","overflow-hidden text-ellipsis",e.state.labelPosition==="top"?"float-none inline-block text-left sm:text-left leading-none px-0 pt-0 pb-1.5 h-auto min-h-0 sm:py-0 sm:pb-1 sm:min-h-[theme(spacing.0)]":"min-h-[theme(spacing.9)]",e.state.labelPosition==="right"?"text-right sm:text-right":"",e.state.labelPosition==="left"?"text-left sm:text-left":"",e.state.formInline&&e.state.labelPosition==="top"?"block":"",e.state.isDisplayOnly?"leading-none h-auto align-[inherit] pr-4":"",e.tipContent?"pr-5 sm:pr-7":"",e.state.labelPosition==="top"&&!e.state.hideRequiredAsterisk?"overflow-visible relative before:absolute before:-left-2.5":"",e.state.disabled?"text-color-icon-placeholder sm:text-color-text-secondary":"text-color-text-secondary",e.state.formItemSize!=="mini"?"sm:text-sm":"sm:text-xs")),style:Ke(e.state.labelStyle),for:e.state.labelFor},[q("span",{class:h(e.m("max-h-[theme(spacing.10)] line-clamp-2 inline-block relative top-px leading-normal",(e.state.isRequired||e.required)&&!e.state.hideRequiredAsterisk?"before:content-['*'] before:text-color-error before:relative before:mr-1":"",e.state.isDisplayOnly?"pl-0 before:hidden":""))},[$(e.$slots,"label",{},function(){return[et(Y(e.label+e.state.labelSuffix),1)]})],2),e.tipContent?(I(),ae(s,{key:0,effect:"light",content:e.tipContent,placement:"top"},{default:ve(function(){return[V(o,{"custom-class":"h-4 w-4 ml-0.5 absolute right-1 sm:right-2 align-text-bottom fill-color-text-secondary",class:h([e.state.labelPosition==="top"?"top-0.5 sm:top-1.5":"top-3.5 sm:top-1.5"])},null,8,["class"])]}),_:1},8,["content"])):A("v-if",!0)],14,Va)):A("v-if",!0)]}),_:3},8,["is-auto-width","update-all"]),q("div",{"data-tag":"tiny-form-item-inline",class:h(e.m("flex-1 m-0 sm:m-auto relative sm:pt-0 sm:top-auto text-sm after:content-['']  after:table after:clear-both before:content-['']  before:table [&_button:not(:last-child)]:mr-2","[&_[data-tag=tiny-checkbox]]:py-0 [&_[data-tag=tiny-input]]:w-full","[&_[data-tag=tiny-input]_textarea]:px-0 sm:[&_[data-tag=tiny-input]_textarea]:px-3 [&_[data-tag=tiny-input]_textarea]:w-full [&_[data-tag=tiny-input]_textarea]:pt-1 sm:[&_[data-tag=tiny-input]_textarea]:pt-2",e.state.formInline?"align-sub leading-none":"",e.state.labelPosition==="top"&&!e.state.hideRequiredAsterisk?e.state.isDisplayOnly?"pl-0":"pl-2 sm:pl-0":"pt-2",e.state.formItemSize!=="mini"?"sm:text-sm":"sm:text-xs"))},[e.state.isDisplayOnly&&e.state.isBasicComp?(I(),W("div",{key:0,"data-tag":"tiny-form-item-display-only",class:h(["break-all min-h-[28px] leading-7 text-color-text-primary",e.state.typeName==="textarea"?"line-clamp-3":"line-clamp-1"]),"type-name":e.state.typeName,onMouseenter:t[0]||(t[0]=function(){return e.handleMouseenter&&e.handleMouseenter.apply(e,arguments)}),onMouseleave:t[1]||(t[1]=function(){return e.handleMouseleave&&e.handleMouseleave.apply(e,arguments)})},Y(e.state.displayedValue||"-"),43,Wa)):A("v-if",!0),tt(q("div",{"data-tag":"tiny-form-item-show",class:h(["[&_[aria-label=checkbox-group]]:pl-0.5 sm:[&_[aria-label=checkbox-group]]:pl-0","[&_>:first-child[data-tag=tiny-checkbox]]:pl-0.5 sm:[&_>:first-child[data-tag=tiny-checkbox]]:pl-0","[&_[class^=tiny-autocomplete]]:w-full","[&_[class^=tiny-cascader]]:w-full",e.state.isDisplayOnly?"[&_>*:not([data-tag^=tiny-],[class^=tiny-])]:leading-8 [&_>*:not([data-tag^=tiny-],[class^=tiny-])]:sm:leading-normal":""])},[$(e.$slots,"default")],2),[[at,!(e.state.isDisplayOnly&&e.state.isBasicComp)]]),e.state.validateState==="error"&&e.showMessage&&e.state.showMessage?$(e.$slots,"error",{key:1,dataTag:"tiny-form-item-error"},function(){return[q("div",{class:h(e.m("relative sm:absolute left-0 bottom-1 sm:-bottom-5 text-color-error text-xs leading-normal line-clamp-3 sm:line-clamp-1 break-all",typeof e.inlineMessage=="boolean"&&e.inlineMessage||e.state.inlineMessage?"relative top-auto left-auto inline-block":"",e.state.formItemSize==="small"?"pt-0.5":"",e.state.formItemSize==="mini"?"pt-px":"")),title:e.state.validateMessage},Y(e.state.validateMessage),11,Fa)]}):A("v-if",!0),e.state.validateState!=="error"&&e.showMessage&&e.state.showMessage?$(e.$slots,"prompt",{key:2}):A("v-if",!0)],2)],2)}var Ea=Aa(Oa,[["render",Ba]]);function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)({}).hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},K.apply(null,arguments)}var _a=function(t){var a,l=typeof process=="object"?(a={})==null?void 0:a.TINY_MODE:null;return(l||t)==="pc"?Ie:(l||t)==="mobile-first"?Ea:Ie},La={FORM_NAME:"Form",FORM_ITEM_NAME:"FormItem"},ka=K({},k,{_constants:{type:Object,default:function(){return La}},appendToBody:{type:Boolean,default:void 0},error:{type:String,default:""},for:String,inlineMessage:{type:Boolean,default:void 0},messageType:String,label:String,labelWidth:String,manual:Boolean,popperOptions:{type:Object,default:function(){return{}}},prop:String,required:{type:Boolean,default:void 0},rules:[Object,Array],showMessage:{type:Boolean,default:!0},size:String,tipContent:String,validateDisabled:Boolean,validateDebounce:Boolean,validatePosition:String,validateStatus:String,validateType:String,validateIcon:Object,ellipsis:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},extra:String}),X=T({name:z+"FormItem",componentName:"FormItem",props:ka,setup:function(t,a){return we({props:t,context:a,template:_a})}});X.install=function(e){e.component(X.name,X)};export{X as F,D as a};
