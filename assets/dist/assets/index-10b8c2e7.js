import{d as S,b as i,aa as T,w as G,o as U,H as w,I as h,l as e,U as o,u as t,r as V,ac as R,B as j,J as f,W as D,Q as B,M as I}from"./pinia-940ae834.js";import{G as x,_ as E,a as K,F as H}from"./screen-in-993e2dea.js";import{N as J,I as q,D as L,B as Q,T as z,_ as W}from"./index-6aa188e3.js";import{P as Y,G as A,C as g,T as O}from"./index-e9138268.js";import{k as X,q as Z,d as ee}from"./keys-67327c6b.js";import{a as te,F as P}from"./index-7fd68173.js";import"./index-634137d9.js";import"./index-b481a712.js";import"./echarts4-2e0a4b0e.js";import"./echarts-0ad49557.js";import"./vue-b33d3fd0.js";import"./axios-7a713374.js";import"./mitt-f7ef348c.js";import"./index-294a3c00.js";const ae={class:"demo-drawer"},se={name:"Editor"},le=S({...se,props:{visible:{type:Boolean,default:!1},artdata:{type:Object,default:()=>{}}},emits:["update:visible","update:artdata","success"],setup(F,{emit:k}){const u=i(!1);i([{label:"demo",value:"1"}]),i([]);const r=i({keyname:"",passwd:""}),_=F,b=T(_,"visible");T(_,"artdata");const v=a=>{u.value=a},$=()=>{console.log("fromData:",r.value),X(r.value).then(a=>{let s="error";a.code===200&&(u.value=!1,s="success",y("success",!0)),J({type:s,message:a.msg,position:"top-right"})})},y=k;return G(b,(a,s)=>{u.value=b.value}),G(u,(a,s)=>{y("update:visible",u.value)}),U(()=>{}),(a,s)=>(w(),h("div",ae,[e(t(L),{visible:u.value,"onUpdate:visible":s[2]||(s[2]=p=>u.value=p),title:a.$t("keys.form.title"),"show-footer":"",width:"40%",onClose:s[3]||(s[3]=p=>v(!1)),onConfirm:$},{default:o(()=>[e(t(te),{ref:"ruleFormRef",model:r.value,"label-position":"left","label-align":!0,"label-width":"150px",style:{"margin-top":"20px"}},{default:o(()=>[e(t(P),{label:a.$t("keys.form.name"),prop:"keyname",required:""},{default:o(()=>[e(t(q),{modelValue:r.value.keyname,"onUpdate:modelValue":s[0]||(s[0]=p=>r.value.keyname=p),placeholder:a.$t("keys.form.name.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(t(P),{label:a.$t("keys.form.passwd"),prop:"passwd"},{default:o(()=>[e(t(q),{modelValue:r.value.passwd,"onUpdate:modelValue":s[1]||(s[1]=p=>r.value.passwd=p),type:"password",placeholder:a.$t("keys.form.passwd.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["visible","title"])]))}}),oe={class:"container-list"},ne={class:"contain"},re={class:"tiny-fullscreen-scroll"},ie={class:"tiny-fullscreen-wrapper"},ue={class:"btn"},de={class:"screen"},pe=["onClick"],me=S({__name:"index",setup(F){const k=i(!1),u=i({}),r=V({loading:!1,filterOptions:{}}),_=V({component:Y,attrs:{currentPage:1,pageSize:10,pageSizes:[10,20],total:10,layout:"total, prev, pager, next, jumper, sizes"}});let b=i([]);const v=i(),{loading:$,filterOptions:y}=R(r);async function a(l={page:1,limit:10,status:""}){console.log("filterOptions.value:",y.value);const{...n}=y.value,d={...l,...n};r.loading=!0;try{const c=await Z(d);return b.value=c.data,{result:c.data,page:{total:c.count}}}finally{r.loading=!1}}const s=()=>{N()},p=V({api:({page:l})=>{const{currentPage:n,pageSize:d}=l;return a({page:n,limit:d})}}),M=l=>{z.confirm("您确定要删除密钥吗？不可恢复哦").then(n=>{ee(l).then(d=>{d.code===200?(N(),z.message({message:d.msg,status:"success"})):z.message({message:d.msg,status:"error"})})})};function N(){v==null||v.value.handleFetch("reload"),a()}i(!0);const m=i(!1),C=()=>{m.value=!m.value};return U(()=>{a()}),(l,n)=>{const d=j("Breadcrumb");return w(),h("div",oe,[e(d,{items:["menu.keys","menu.keys.list"]}),f("div",ne,[e(t(H),{teleport:!0,"page-only":!0,"z-index":999,fullscreen:m.value,"onUpdate:fullscreen":n[1]||(n[1]=c=>m.value=c)},{default:o(()=>[f("div",re,[f("div",ie,[e(t(A),{ref_key:"taskGrid",ref:v,"fetch-data":p,pager:_,loading:t($),"seq-serial":"",size:"medium","auto-resize":!0,"row-id":"id"},{toolbar:o(()=>[e(t(x),null,{buttons:o(()=>[f("div",ue,[e(t(Q),{type:"info",onClick:n[0]||(n[0]=()=>{k.value=!0})},{default:o(()=>[D(B(l.$t("keys.operation.create")),1)]),_:1}),f("div",de,[m.value?I("",!0):(w(),h("img",{key:0,src:E,class:"screen-image",onClick:C})),m.value?(w(),h("img",{key:1,src:K,class:"screen-image",onClick:C})):I("",!0),f("span",{onClick:C},B(m.value?l.$t("keys.collapse.restores"):l.$t("keys.collapse.full")),1)])])]),_:1})]),default:o(()=>[e(t(g),{type:"index",width:"60"}),e(t(g),{field:"keyname",title:l.$t("keys.columns.keyname"),align:"center"},null,8,["title"]),e(t(g),{field:"publickey",title:l.$t("keys.columns.publickey"),align:"center"},{default:o(()=>[e(t(O),null,{default:o(()=>n[2]||(n[2]=[D("数据安全不显示")])),_:1})]),_:1},8,["title"]),e(t(g),{field:"privatekey",title:l.$t("keys.columns.privatekey"),align:"center"},{default:o(()=>[e(t(O),null,{default:o(()=>n[3]||(n[3]=[D("数据安全不显示")])),_:1})]),_:1},8,["title"]),e(t(g),{title:l.$t("keys.columns.operations"),align:"center"},{default:o(c=>[f("a",{class:"operation-item",onClick:ce=>M(c.row.id)},B(l.$t("keys.columns.operations.delete")),9,pe)]),_:1},8,["title"])]),_:1},8,["fetch-data","pager","loading"])])])]),_:1},8,["fullscreen"])]),e(le,{visible:k.value,artdata:u.value,onSuccess:s},null,8,["visible","artdata"])])}}});const ze=W(me,[["__scopeId","data-v-132f5b21"]]);export{ze as default};
