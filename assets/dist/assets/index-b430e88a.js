import{H as h,I as w,L as H,N as X,O as Y,M as V,Q as C,P,R as Z,b as $,d as A,c as M,r as U,o as G,l as n,U as m,u as r,i as B,J as y,W as S,p as Q}from"./pinia-dfb2bf3c.js";import{x as J,d as N,p as K,s as W,$ as x,a as ee,b as oe,u as se,I as k,C as re,B as z,T as O,_ as T,r as ae,F as ne}from"./index-2e90f1ca.js";import{u as D,a as te}from"./vue-c279faa6.js";import{F as b,a as j}from"./index-a1ff28f4.js";import"./echarts4-cf16eb29.js";import"./echarts-0ad49557.js";import"./axios-7a713374.js";import"./mitt-f7ef348c.js";import"./index-b3de8022.js";const le=({emit:e,props:o,state:s})=>a=>{!s.disabled&&!o.href&&e("click",a)},ie=["state","handleClick"],de=(e,{inject:o,reactive:s,computed:a},{emit:l,parent:p})=>{p.tinyForm=p.tinyForm||o("form",null);const _=s({formDisabled:a(()=>(p.tinyForm||{}).disabled),disabled:a(()=>e.disabled||_.formDisabled),href:a(()=>J.filterUrl(e.href))});return{state:_,handleClick:le({emit:l,props:e,state:_})}};function ue(e,o){var s=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(s)return(s=s.call(e)).next.bind(s);if(Array.isArray(e)||(s=me(e))||o&&e&&typeof e.length=="number"){s&&(e=s);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function me(e,o){if(e){if(typeof e=="string")return R(e,o);var s={}.toString.call(e).slice(8,-1);return s==="Object"&&e.constructor&&(s=e.constructor.name),s==="Map"||s==="Set"?Array.from(e):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?R(e,o):void 0}}function R(e,o){(o==null||o>e.length)&&(o=e.length);for(var s=0,a=Array(o);s<o;s++)a[s]=e[s];return a}var pe=function(o,s){for(var a=o.__vccOpts||o,l=ue(s),p;!(p=l()).done;){var _=p.value,t=_[0],I=_[1];a[t]=I}return a},ce=N({props:[].concat(K,["disabled","href","icon","type","underline","value"]),emits:["click"],setup:function(o,s){return W({props:o,context:s,renderless:de,api:ie})}}),fe=["href"],ge={key:1,class:"tiny-link__inner"},_e={key:2,class:"tiny-link__inner"};function ve(e,o,s,a,l,p){return h(),w("a",Z({class:["tiny-link","tiny-link--additional",e.type?"tiny-link--"+e.type:"",e.state.disabled&&"is-disabled",e.underline&&!e.state.disabled&&"is-underline"],href:e.state.disabled?null:e.state.href},e.a(e.$attrs,["^on[A-Z]"]),{rel:"noopener noreferrer",onClick:o[0]||(o[0]=function(){return e.handleClick&&e.handleClick.apply(e,arguments)})}),[e.icon?(h(),H(Y(e.icon),{key:0,class:X(["tiny-svg-size tiny-link-svg",{"tiny-link-svg-only":!(e.slots.default||e.value)}])},null,8,["class"])):V("v-if",!0),e.value?(h(),w("span",ge,C(e.value),1)):e.slots.default?(h(),w("span",_e,[P(e.$slots,"default")])):V("v-if",!0),e.slots.icon?P(e.$slots,"icon",{key:3}):V("v-if",!0)],16,fe)}var ye=pe(ce,[["render",ve]]);function F(){return F=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var s=arguments[o];for(var a in s)({}).hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},F.apply(null,arguments)}var he=function(o){var s;return typeof process=="object"&&((s={})==null||s.TINY_MODE),ye},we=F({},x,{type:{type:String,default:"default"},value:String,underline:{type:Boolean,default:!0},href:String,icon:[Object,String],disabled:Boolean}),E=N({name:ee+"Link",props:we,setup:function(o,s){return oe({props:o,context:s,template:he})}}),be="3.19.0";E.install=function(e){e.component(E.name,E)};E.version=be;function q(e=!1){const o=$(e);return{loading:o,setLoading:l=>{o.value=l},toggle:()=>{o.value=!o.value}}}const $e={class:"login-form-container"},Ce={class:"login-form-options"},Ie=A({__name:"login-info",setup(e){const o=te(),{t:s}=D(),{loading:a,setLoading:l}=q(),p=se(),_=$(),t=$(-1),I=M(()=>({username:[{required:!0,message:s("login.form.userName.errMsg"),trigger:"change"}],password:[{required:!0,message:s("login.form.password.errMsg"),trigger:"change"}]})),v=U({username:"",password:""});B("handle");function L(){var c;(c=_.value)==null||c.validate(async f=>{if(f){l(!0);try{await p.login({account:v.username,password:v.password}),O.message({message:s("login.form.login.success"),status:"success"});const{redirect:g,...i}=o.currentRoute.value.query;console.log("redirect:>>>>>>",g),t.value===1&&window.localStorage.setItem("USER_ACCOUNT_CACHE",v.username),o.push({name:g||"Home",query:{...i}})}catch{}finally{l(!1)}}})}return G(()=>{let c=window.localStorage.getItem("USER_ACCOUNT_CACHE");c&&(v.username=c)}),(c,f)=>(h(),w("div",$e,[n(r(j),{ref_key:"loginFormInfo",ref:_,model:v,class:"login-form",rules:I.value,"validate-type":"text","label-width":"0",size:"medium"},{default:m(()=>[n(r(b),{prop:"username",size:"medium"},{default:m(()=>[n(r(k),{modelValue:v.username,"onUpdate:modelValue":f[0]||(f[0]=g=>v.username=g),placeholder:c.$t("login.form.userName.placeholder")},null,8,["modelValue","placeholder"])]),_:1}),n(r(b),{prop:"password",size:"medium"},{default:m(()=>[n(r(k),{modelValue:v.password,"onUpdate:modelValue":f[1]||(f[1]=g=>v.password=g),type:"password","show-password":"",placeholder:c.$t("login.form.password.placeholder")},null,8,["modelValue","placeholder"])]),_:1}),y("div",Ce,[n(r(re),{modelValue:t.value,"onUpdate:modelValue":f[2]||(f[2]=g=>t.value=g),"true-label":1,"false-label":0},{default:m(()=>[S(C(c.$t("login.form.rememberAccount")),1)]),_:1},8,["modelValue"]),f[3]||(f[3]=y("div",null,null,-1))]),n(r(b),{size:"medium"},{default:m(()=>[n(r(z),{type:"primary",class:"login-form-btn",loading:r(a),onClick:L},{default:m(()=>[S(C(c.$t("login.form.login")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])]))}});const Ve=T(Ie,[["__scopeId","data-v-1a3c7f9a"]]),ke={class:"login-register-container"},Ee={class:"login-form-options"},Se=A({__name:"login-register",setup(e){const{t:o}=D(),{loading:s,setLoading:a}=q(),l=$(),p=B("handle"),_=()=>{p(!1)};let t=U({username:"",password:"",passwordConfirm:""}),I=$(!0);const v=(i,d,u)=>{/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/.test(d)?u():u(new Error(o("login.form.checkPassword")))},L=(i,d,u)=>{/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/.test(d)?u():u(new Error(o("login.form.checkUsername")))},c=(i,d,u)=>{t.password&&t.password!==d?u(new Error(o("login.form.confirmPassword"))):u()},f=M(()=>({username:[{required:!0,message:o("login.form.mailName.errMsg"),trigger:"blur"},{validator:L,trigger:"blur"}],password:[{required:!0,message:o("login.form.mailpassword.errMsg"),trigger:"blur"},{validator:v,trigger:"blur"}],passwordConfirm:[{required:!0,message:o("login.form.mailpassword2.errMsg"),trigger:"blur"},{validator:c,trigger:"blur"}]}));function g(){l.value.validate(async i=>{if(i){let d=U({username:t.username,password:t.password});await ae(d),O.message({message:o("login.form.registerPass"),status:"success"}),p(!1)}else O.message({message:o("login.form.registerError"),status:"warning"})})}return(i,d)=>(h(),w("div",ke,[n(r(j),{ref_key:"ruleForm",ref:l,model:r(t),rules:f.value,"validate-on-rule-change":r(I),"label-align":!0,"label-position":"top","label-width":"100px"},{default:m(()=>[n(r(b),{label:i.$t("login.form.mailInput"),prop:"username",size:"medium"},{default:m(()=>[n(r(k),{modelValue:r(t).username,"onUpdate:modelValue":d[0]||(d[0]=u=>r(t).username=u),placeholder:i.$t("login.form.registerMail.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(r(b),{label:i.$t("login.form.passwordInput"),prop:"password",size:"medium"},{default:m(()=>[n(r(k),{modelValue:r(t).password,"onUpdate:modelValue":d[1]||(d[1]=u=>r(t).password=u),placeholder:i.$t("login.form.registerPassword.placeholder"),type:"password","show-password":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(r(b),{label:i.$t("login.form.passwordConfirm"),prop:"passwordConfirm",size:"medium"},{default:m(()=>[n(r(k),{modelValue:r(t).passwordConfirm,"onUpdate:modelValue":d[2]||(d[2]=u=>r(t).passwordConfirm=u),placeholder:i.$t("login.form.registerConfirmPassword.placeholder"),type:"password","show-password":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),y("div",Ee,[n(r(E),{type:"primary",onClick:_},{default:m(()=>[S(C(i.$t("login.form.change")),1)]),_:1})]),n(r(b),{size:"medium"},{default:m(()=>[n(r(z),{type:"primary",class:"login-form-btn",loading:r(s),onClick:g},{default:m(()=>[S(C(i.$t("login.form.register")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules","validate-on-rule-change"])]))}});const Ae=T(Se,[["__scopeId","data-v-99554533"]]),Te={class:"login-form-container"},Le={key:0},Ue={key:1},Oe=A({__name:"login-form",setup(e){$("first");let o=$(!1);return Q("handle",a=>{o.value=a}),(a,l)=>(h(),w("div",Te,[l[0]||(l[0]=y("div",{class:"login-form-language"},null,-1)),r(o)?(h(),w("div",Le,[n(Ae)])):V("",!0),r(o)?V("",!0):(h(),w("div",Ue,[n(Ve)]))]))}});const Fe=T(Oe,[["__scopeId","data-v-c6cd779f"]]),Pe={class:"container-login"},Re={class:"content"},Me={class:"login"},Be={class:"login-header"},Ne={class:"login-logo"},ze={class:"login-logo-text"},De={class:"footer"},je=A({__name:"index",setup(e){const{VITE_GLOBAL_TITLE:o}={VITE_GLOBAL_TITLE:"沁芳Linux远程主机管理系统",VITE_BASE_URL:"/static/dist/",VITE_CONTEXT:"/csc/",VITE_BASE_API:"/",VITE_SERVER_HOST:"http://127.0.0.1:7001",VITE_USE_MOCK:"false",VITE_API_URL_PROXY_PREFIX:'[["/api", "http://127.0.0.1:31918/api"]]',BASE_URL:"/static/dist/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};return(s,a)=>(h(),w("div",Pe,[y("div",Re,[y("div",Me,[y("div",Be,[y("div",Ne,[y("span",ze,C(r(o)),1)]),a[0]||(a[0]=y("div",{class:"login-desc"},"用户登录中心（V1.0）",-1))]),n(Fe)])]),y("div",De,[n(ne)])]))}});const We=T(je,[["__scopeId","data-v-b90f4a49"]]);export{We as default};
