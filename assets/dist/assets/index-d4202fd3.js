import{d as P,b as i,aa as T,w as G,o as S,H as w,I as $,l as e,U as n,u as t,r as h,ac as R,B as j,J as f,W as D,Q as B,M as I}from"./pinia-940ae834.js";import{G as x,_ as E,a as K,F as H}from"./screen-in-3cb082ad.js";import{N as J,I as U,D as L,B as Q,T as z,_ as W}from"./index-8096de3c.js";import{P as Y,G as A,C as k,T as q}from"./index-f1062d1b.js";import{k as X,q as Z,d as ee}from"./keys-67327c6b.js";import{a as te,F as O}from"./index-ce8a480c.js";import"./index-22ca1eb9.js";import"./index-e03361d1.js";import"./echarts4-e8f5cdad.js";import"./echarts-0ad49557.js";import"./vue-b33d3fd0.js";import"./axios-7a713374.js";import"./mitt-f7ef348c.js";import"./index-6b3c0b98.js";const ae={class:"demo-drawer"},se={name:"Editor"},le=P({...se,props:{visible:{type:Boolean,default:!1},artdata:{type:Object,default:()=>{}}},emits:["update:visible","update:artdata","success"],setup(F,{emit:y}){const u=i(!1);i([{label:"demo",value:"1"}]),i([]);const r=i({keyname:"",passwd:""}),_=F,b=T(_,"visible");T(_,"artdata");const v=a=>{u.value=a},C=()=>{console.log("fromData:",r.value),X(r.value).then(a=>{let s="error";a.code===200&&(u.value=!1,s="success",g("success",!0)),J({type:s,message:a.msg,position:"top-right"})})},g=y;return G(b,(a,s)=>{u.value=b.value}),G(u,(a,s)=>{g("update:visible",u.value)}),S(()=>{}),(a,s)=>(w(),$("div",ae,[e(t(L),{visible:u.value,"onUpdate:visible":s[2]||(s[2]=m=>u.value=m),title:a.$t("keys.form.title"),"show-footer":"",width:"40%",onClose:s[3]||(s[3]=m=>v(!1)),onConfirm:C},{default:n(()=>[e(t(te),{ref:"ruleFormRef",model:r.value,"label-position":"left","label-align":!0,"label-width":"150px",style:{"margin-top":"20px"}},{default:n(()=>[e(t(O),{label:a.$t("keys.form.name"),prop:"keyname",required:""},{default:n(()=>[e(t(U),{modelValue:r.value.keyname,"onUpdate:modelValue":s[0]||(s[0]=m=>r.value.keyname=m),placeholder:a.$t("keys.form.name.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(t(O),{label:a.$t("keys.form.passwd"),prop:"passwd"},{default:n(()=>[e(t(U),{modelValue:r.value.passwd,"onUpdate:modelValue":s[1]||(s[1]=m=>r.value.passwd=m),type:"password",placeholder:a.$t("keys.form.passwd.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["visible","title"])]))}}),oe={class:"container-list"},ne={class:"contain"},re={class:"tiny-fullscreen-scroll"},ie={class:"tiny-fullscreen-wrapper"},ue={class:"btn"},de={class:"screen"},pe=["onClick"],me=P({__name:"index",setup(F){const y=i(!1),u=i({}),r=h({loading:!1,filterOptions:{}}),_=h({component:Y,attrs:{currentPage:1,pageSize:10,pageSizes:[10,20],total:10,layout:"total, prev, pager, next, jumper, sizes"}});let b=i([]);const v=i(),{loading:C,filterOptions:g}=R(r);async function a(o={page:1,limit:10,status:""}){console.log("filterOptions.value:",g.value);const{...l}=g.value,d={...o,...l};r.loading=!0;try{const p=await Z(d);return b.value=p.data,{result:p.data,page:{total:p.count}}}finally{r.loading=!1}}const s=()=>{N()},m=h({api:({page:o})=>{const{currentPage:l,pageSize:d}=o;return a({page:l,limit:d})}}),M=o=>{z.confirm("您确定要删除密钥吗？不可恢复哦").then(l=>{ee(o).then(d=>{d.code===200?(N(),z.message({message:d.msg,status:"success"})):z.message({message:d.msg,status:"error"})})})};function N(){v==null||v.value.handleFetch("reload"),a()}i(!0);const c=i(!1),V=()=>{c.value=!c.value};return S(()=>{a()}),(o,l)=>{const d=j("Breadcrumb");return w(),$("div",oe,[e(d,{items:["menu.keys","menu.keys.list"]}),f("div",ne,[e(t(H),{teleport:!0,"page-only":!0,"z-index":999,fullscreen:c.value,"onUpdate:fullscreen":l[1]||(l[1]=p=>c.value=p)},{default:n(()=>[f("div",re,[f("div",ie,[e(t(A),{ref_key:"taskGrid",ref:v,"fetch-data":m,pager:_,loading:t(C),"seq-serial":"",size:"medium","auto-resize":!0,"row-id":"id"},{toolbar:n(()=>[e(t(x),null,{buttons:n(()=>[f("div",ue,[e(t(Q),{type:"info",onClick:l[0]||(l[0]=()=>{y.value=!0})},{default:n(()=>[D(B(o.$t("keys.operation.create")),1)]),_:1}),f("div",de,[c.value?I("",!0):(w(),$("img",{key:0,src:E,class:"screen-image",onClick:V})),c.value?(w(),$("img",{key:1,src:K,class:"screen-image",onClick:V})):I("",!0),f("span",{onClick:V},B(c.value?o.$t("keys.collapse.restores"):o.$t("keys.collapse.full")),1)])])]),_:1})]),default:n(()=>[e(t(k),{type:"index",width:"60"}),e(t(k),{field:"keyname",title:o.$t("keys.columns.keyname"),align:"center"},null,8,["title"]),e(t(k),{field:"publickey",title:o.$t("keys.columns.publickey"),align:"center"},{default:n(()=>[e(t(q),null,{default:n(()=>l[3]||(l[3]=[D("数据安全不显示")])),_:1})]),_:1},8,["title"]),e(t(k),{field:"privatekey",title:o.$t("keys.columns.privatekey"),align:"center"},{default:n(()=>[e(t(q),null,{default:n(()=>l[4]||(l[4]=[D("数据安全不显示")])),_:1})]),_:1},8,["title"]),e(t(k),{title:o.$t("keys.columns.operations"),align:"center"},{default:n(p=>[f("a",{class:"operation-item",onClick:ce=>M(p.row.id)},B(o.$t("keys.columns.operations.delete")),9,pe)]),_:1},8,["title"])]),_:1},8,["fetch-data","pager","loading"])])])]),_:1},8,["fullscreen"])]),e(le,{visible:y.value,"onUpdate:visible":l[2]||(l[2]=p=>y.value=p),artdata:u.value,onSuccess:s},null,8,["visible","artdata"])])}}});const ze=W(me,[["__scopeId","data-v-03f5b1cc"]]);export{ze as default};
