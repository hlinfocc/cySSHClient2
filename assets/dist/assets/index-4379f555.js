import{H as y,I as h,L as H,N as X,O as Y,M as I,Q as $,P,R as Z,b,d as A,c as M,r as U,o as G,f as Q,l as t,U as p,u as r,i as B,J as v,W as L,p as J}from"./pinia-940ae834.js";import{x as K,d as N,p as W,s as x,$ as ee,a as oe,b as se,u as re,I as k,C as ne,B as z,T as O,_ as T,r as ae,F as te}from"./index-6aa188e3.js";import{u as D,a as le}from"./vue-b33d3fd0.js";import{F as w,a as j}from"./index-7fd68173.js";import"./echarts4-2e0a4b0e.js";import"./echarts-0ad49557.js";import"./axios-7a713374.js";import"./mitt-f7ef348c.js";import"./index-294a3c00.js";const ie=({emit:e,props:o,state:s})=>n=>{!s.disabled&&!o.href&&e("click",n)},de=["state","handleClick"],ue=(e,{inject:o,reactive:s,computed:n},{emit:d,parent:f})=>{f.tinyForm=f.tinyForm||o("form",null);const g=s({formDisabled:n(()=>(f.tinyForm||{}).disabled),disabled:n(()=>e.disabled||g.formDisabled),href:n(()=>K.filterUrl(e.href))});return{state:g,handleClick:ie({emit:d,props:e,state:g})}};function me(e,o){var s=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(s)return(s=s.call(e)).next.bind(s);if(Array.isArray(e)||(s=pe(e))||o&&e&&typeof e.length=="number"){s&&(e=s);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pe(e,o){if(e){if(typeof e=="string")return R(e,o);var s={}.toString.call(e).slice(8,-1);return s==="Object"&&e.constructor&&(s=e.constructor.name),s==="Map"||s==="Set"?Array.from(e):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?R(e,o):void 0}}function R(e,o){(o==null||o>e.length)&&(o=e.length);for(var s=0,n=Array(o);s<o;s++)n[s]=e[s];return n}var fe=function(o,s){for(var n=o.__vccOpts||o,d=me(s),f;!(f=d()).done;){var g=f.value,l=g[0],C=g[1];n[l]=C}return n},ce=N({props:[].concat(W,["disabled","href","icon","type","underline","value"]),emits:["click"],setup:function(o,s){return x({props:o,context:s,renderless:ue,api:de})}}),ge=["href"],_e={key:1,class:"tiny-link__inner"},ve={key:2,class:"tiny-link__inner"};function ye(e,o,s,n,d,f){return y(),h("a",Z({class:["tiny-link","tiny-link--additional",e.type?"tiny-link--"+e.type:"",e.state.disabled&&"is-disabled",e.underline&&!e.state.disabled&&"is-underline"],href:e.state.disabled?null:e.state.href},e.a(e.$attrs,["^on[A-Z]"]),{rel:"noopener noreferrer",onClick:o[0]||(o[0]=function(){return e.handleClick&&e.handleClick.apply(e,arguments)})}),[e.icon?(y(),H(Y(e.icon),{key:0,class:X(["tiny-svg-size tiny-link-svg",{"tiny-link-svg-only":!(e.slots.default||e.value)}])},null,8,["class"])):I("v-if",!0),e.value?(y(),h("span",_e,$(e.value),1)):e.slots.default?(y(),h("span",ve,[P(e.$slots,"default")])):I("v-if",!0),e.slots.icon?P(e.$slots,"icon",{key:3}):I("v-if",!0)],16,ge)}var he=fe(ce,[["render",ye]]);function F(){return F=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var s=arguments[o];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},F.apply(null,arguments)}var we=function(o){var s;return typeof process=="object"&&((s={})==null||s.TINY_MODE),he},be=F({},ee,{type:{type:String,default:"default"},value:String,underline:{type:Boolean,default:!0},href:String,icon:[Object,String],disabled:Boolean}),V=N({name:oe+"Link",props:be,setup:function(o,s){return se({props:o,context:s,template:we})}}),$e="3.19.0";V.install=function(e){e.component(V.name,V)};V.version=$e;function q(e=!1){const o=b(e);return{loading:o,setLoading:d=>{o.value=d},toggle:()=>{o.value=!o.value}}}const Ce={class:"login-form-container"},Ie={class:"login-form-options"},ke=A({__name:"login-info",setup(e){const o=le(),{t:s}=D(),{loading:n,setLoading:d}=q(),f=re(),g=b(),l=b(-1),C=M(()=>({username:[{required:!0,message:s("login.form.userName.errMsg"),trigger:"change"}],password:[{required:!0,message:s("login.form.password.errMsg"),trigger:"change"}]})),_=U({username:"",password:""});B("handle");function E(){var u;(u=g.value)==null||u.validate(async c=>{if(c){d(!0);try{await f.login({account:_.username,password:_.password});const{redirect:a,...i}=o.currentRoute.value.query;console.log("redirect:>>>>>>",a),l.value===1&&window.localStorage.setItem("USER_ACCOUNT_CACHE",_.username),o.push({name:a||"Home",query:{...i}})}catch(a){O.message({message:a.message?a.message:"登录失败",status:"error"})}finally{d(!1)}}})}const S=u=>{u.keyCode===13&&E()};return G(()=>{let u=window.localStorage.getItem("USER_ACCOUNT_CACHE");u&&(_.username=u),window.addEventListener("keyup",S,!1)}),Q(()=>{window.removeEventListener("keyup",S)}),(u,c)=>(y(),h("div",Ce,[t(r(j),{ref_key:"loginFormInfo",ref:g,model:_,class:"login-form",rules:C.value,"validate-type":"text","label-width":"0",size:"medium"},{default:p(()=>[t(r(w),{prop:"username",size:"medium"},{default:p(()=>[t(r(k),{modelValue:_.username,"onUpdate:modelValue":c[0]||(c[0]=a=>_.username=a),placeholder:u.$t("login.form.userName.placeholder")},null,8,["modelValue","placeholder"])]),_:1}),t(r(w),{prop:"password",size:"medium"},{default:p(()=>[t(r(k),{modelValue:_.password,"onUpdate:modelValue":c[1]||(c[1]=a=>_.password=a),type:"password","show-password":"",placeholder:u.$t("login.form.password.placeholder")},null,8,["modelValue","placeholder"])]),_:1}),v("div",Ie,[t(r(ne),{modelValue:l.value,"onUpdate:modelValue":c[2]||(c[2]=a=>l.value=a),"true-label":1,"false-label":0},{default:p(()=>[L($(u.$t("login.form.rememberAccount")),1)]),_:1},8,["modelValue"]),c[3]||(c[3]=v("div",null,null,-1))]),t(r(w),{size:"medium"},{default:p(()=>[t(r(z),{type:"info",class:"login-form-btn",loading:r(n),onClick:E},{default:p(()=>[L($(u.$t("login.form.login")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])]))}});const Ve=T(ke,[["__scopeId","data-v-e8656e2f"]]),Ee={class:"login-register-container"},Se={class:"login-form-options"},Le=A({__name:"login-register",setup(e){const{t:o}=D(),{loading:s,setLoading:n}=q(),d=b(),f=B("handle"),g=()=>{f(!1)};let l=U({username:"",password:"",passwordConfirm:""}),C=b(!0);const _=(a,i,m)=>{/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/.test(i)?m():m(new Error(o("login.form.checkPassword")))},E=(a,i,m)=>{/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/.test(i)?m():m(new Error(o("login.form.checkUsername")))},S=(a,i,m)=>{l.password&&l.password!==i?m(new Error(o("login.form.confirmPassword"))):m()},u=M(()=>({username:[{required:!0,message:o("login.form.mailName.errMsg"),trigger:"blur"},{validator:E,trigger:"blur"}],password:[{required:!0,message:o("login.form.mailpassword.errMsg"),trigger:"blur"},{validator:_,trigger:"blur"}],passwordConfirm:[{required:!0,message:o("login.form.mailpassword2.errMsg"),trigger:"blur"},{validator:S,trigger:"blur"}]}));function c(){d.value.validate(async a=>{if(a){let i=U({username:l.username,password:l.password});await ae(i),O.message({message:o("login.form.registerPass"),status:"success"}),f(!1)}else O.message({message:o("login.form.registerError"),status:"warning"})})}return(a,i)=>(y(),h("div",Ee,[t(r(j),{ref_key:"ruleForm",ref:d,model:r(l),rules:u.value,"validate-on-rule-change":r(C),"label-align":!0,"label-position":"top","label-width":"100px"},{default:p(()=>[t(r(w),{label:a.$t("login.form.mailInput"),prop:"username",size:"medium"},{default:p(()=>[t(r(k),{modelValue:r(l).username,"onUpdate:modelValue":i[0]||(i[0]=m=>r(l).username=m),placeholder:a.$t("login.form.registerMail.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(r(w),{label:a.$t("login.form.passwordInput"),prop:"password",size:"medium"},{default:p(()=>[t(r(k),{modelValue:r(l).password,"onUpdate:modelValue":i[1]||(i[1]=m=>r(l).password=m),placeholder:a.$t("login.form.registerPassword.placeholder"),type:"password","show-password":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(r(w),{label:a.$t("login.form.passwordConfirm"),prop:"passwordConfirm",size:"medium"},{default:p(()=>[t(r(k),{modelValue:r(l).passwordConfirm,"onUpdate:modelValue":i[2]||(i[2]=m=>r(l).passwordConfirm=m),placeholder:a.$t("login.form.registerConfirmPassword.placeholder"),type:"password","show-password":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),v("div",Se,[t(r(V),{type:"primary",onClick:g},{default:p(()=>[L($(a.$t("login.form.change")),1)]),_:1})]),t(r(w),{size:"medium"},{default:p(()=>[t(r(z),{type:"primary",class:"login-form-btn",loading:r(s),onClick:c},{default:p(()=>[L($(a.$t("login.form.register")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules","validate-on-rule-change"])]))}});const Ae=T(Le,[["__scopeId","data-v-99554533"]]),Te={class:"login-form-container"},Ue={key:0},Oe={key:1},Fe=A({__name:"login-form",setup(e){b("first");let o=b(!1);return J("handle",n=>{o.value=n}),(n,d)=>(y(),h("div",Te,[d[0]||(d[0]=v("div",{class:"login-form-language"},null,-1)),r(o)?(y(),h("div",Ue,[t(Ae)])):I("",!0),r(o)?I("",!0):(y(),h("div",Oe,[t(Ve)]))]))}});const Pe=T(Fe,[["__scopeId","data-v-c6cd779f"]]),Re={class:"container-login"},Me={class:"content"},Be={class:"login"},Ne={class:"login-header"},ze={class:"login-logo"},De={class:"login-logo-text"},je={class:"footer"},qe=A({__name:"index",setup(e){const{VITE_GLOBAL_TITLE:o}={VITE_GLOBAL_TITLE:"沁芳Linux远程主机管理系统",VITE_BASE_URL:"/static/dist/",VITE_CONTEXT:"/csc/",VITE_BASE_API:"/",VITE_SERVER_HOST:"http://127.0.0.1:7001",VITE_USE_MOCK:"false",VITE_API_URL_PROXY_PREFIX:'[["/api", "http://127.0.0.1:31918/api"]]',BASE_URL:"/static/dist/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};return(s,n)=>(y(),h("div",Re,[v("div",Me,[v("div",Be,[v("div",Ne,[v("div",ze,[v("span",De,$(r(o)),1)]),n[0]||(n[0]=v("div",{class:"login-desc"},"用户登录中心（V1.0）",-1))]),t(Pe)])]),v("div",je,[t(te)])]))}});const xe=T(qe,[["__scopeId","data-v-b90f4a49"]]);export{xe as default};
