import{d as D,r as C,b as k,c as j,H as c,L as w,U as l,u as e,l as t,I,Y as L,F as N,B as E,J as b,W as B,Q as h}from"./pinia-dfb2bf3c.js";import{I as v,L as Y,T as S,_ as R,u as q,B as x}from"./index-74e359ca.js";import{R as g,C as u}from"./index-bd5c9013.js";import{D as T}from"./index-f7506815.js";import{F as d,a as J}from"./index-c5260b53.js";import{O as M}from"./index-c44f3362.js";import{S as z}from"./index-7cce16e7.js";import{u as U}from"./vue-c279faa6.js";import"./echarts4-9a31c40b.js";import"./echarts-0ad49557.js";import"./axios-7a713374.js";import"./mitt-f7ef348c.js";import"./repeat-click-920401bd.js";import"./index-c8a932e8.js";function _(O){let i=new Date(O);return`${i.getFullYear()}-${i.getMonth()+1}-${i.getDate()}`}const H=D({__name:"set-from",setup(O,{expose:i}){const p=[{value:"1",label:"social recruitment"},{value:"2",label:"scholl recruitment"},{value:"3",label:"Job transfer"}],a=C({filterOptions:{},department:"",position:[],type:[],date:[],during:"",startTime:"",endTime:""}),f=k(),{t:y}=U(),r={required:!0,trigger:"blur"},m={required:!0,message:"必选",trigger:"blur"},V=j(()=>({department:[r],position:[r],type:[m],date:[r],during:[r],startTime:[r],endTime:[r]})),F=()=>{var s,$;const n=(s=a.filterOptions.startTime)==null?void 0:s.getTime();(($=a.filterOptions.endTime)==null?void 0:$.getTime())<n&&(a.filterOptions.endTime="",S.message({message:y("userInfo.time.message"),status:"error"}))};return i({setData:()=>a,setFormValid:()=>{let n=!1;return f.value.validate(o=>{n=o}),n},setReset:()=>{a.filterOptions={}}}),(n,o)=>(c(),w(e(Y),null,{default:l(()=>[t(e(J),{ref_key:"setFormRef",ref:f,model:a.filterOptions,rules:V.value,"label-width":"150px","label-align":!0,"label-position":"left",size:"small"},{default:l(()=>[t(e(g),{flex:!0,justify:"left"},{default:l(()=>[t(e(u),{span:5,"label-width":"100px"},{default:l(()=>[t(e(d),{label:n.$t("userSetting.department"),prop:"department"},{default:l(()=>[t(e(v),{modelValue:a.filterOptions.department,"onUpdate:modelValue":o[0]||(o[0]=s=>a.filterOptions.department=s)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),t(e(u),{span:5,"label-width":"100px"},{default:l(()=>[t(e(d),{label:n.$t("userSetting.position"),prop:"position"},{default:l(()=>[t(e(v),{modelValue:a.filterOptions.position,"onUpdate:modelValue":o[1]||(o[1]=s=>a.filterOptions.position=s)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),t(e(g),{flex:!0,justify:"left"},{default:l(()=>[t(e(u),{span:5,"label-width":"100px"},{default:l(()=>[t(e(d),{label:n.$t("userSetting.type"),prop:"type"},{default:l(()=>[t(e(z),{modelValue:a.filterOptions.type,"onUpdate:modelValue":o[2]||(o[2]=s=>a.filterOptions.type=s),placeholder:n.$t("baseForm.form.label.placeholder")},{default:l(()=>[(c(!0),I(N,null,L(p,s=>(c(),w(e(M),{key:s.value,label:n.$t(s.label),value:s.label},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),t(e(u),{span:5,"label-width":"100px"},{default:l(()=>[t(e(d),{label:n.$t("userSetting.date"),prop:"date"},{default:l(()=>[t(e(T),{modelValue:a.filterOptions.date,"onUpdate:modelValue":o[3]||(o[3]=s=>a.filterOptions.date=s),"unlink-panels":"",type:"daterange","range-separator":"-","start-placeholder":n.$t("userSetting.first"),"end-placeholder":n.$t("userSetting.last")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"])]),_:1})]),_:1}),t(e(g),{flex:!0,justify:"left"},{default:l(()=>[t(e(u),{span:5,"label-width":"100px"},{default:l(()=>[t(e(d),{label:n.$t("userSetting.during"),prop:"during"},{default:l(()=>[t(e(v),{modelValue:a.filterOptions.during,"onUpdate:modelValue":o[4]||(o[4]=s=>a.filterOptions.during=s)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),t(e(u),{span:5,"label-width":"100px"},{default:l(()=>[t(e(d),{label:n.$t("userSetting.startTime"),prop:"startTime"},{default:l(()=>[t(e(T),{modelValue:a.filterOptions.startTime,"onUpdate:modelValue":o[5]||(o[5]=s=>a.filterOptions.startTime=s),onBlur:F},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),t(e(g),{flex:!0,justify:"left"},{default:l(()=>[t(e(u),{span:5,"label-width":"100px"},{default:l(()=>[t(e(d),{label:n.$t("userSetting.endTime"),prop:"endTime"},{default:l(()=>[t(e(T),{modelValue:a.filterOptions.endTime,"onUpdate:modelValue":o[6]||(o[6]=s=>a.filterOptions.endTime=s),onBlur:F},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1}))}});const P=R(H,[["__scopeId","data-v-0e48261b"]]),Q={class:"container-set"},W={class:"general-card"},A={class:"general-contain"},G={class:"general-btn"},K=D({__name:"index",setup(O){const{t:i}=U(),p=k(),a=q();function f(){p.value.setReset()}async function y(){let r=p.value.setData();if(p.value.setFormValid()){let m={department:r.filterOptions.department,job:r.filterOptions.position,employeeType:r.filterOptions.type,probationStart:_(r.filterOptions.date[0]),probationEnd:_(r.filterOptions.date[1]),probationDuration:r.filterOptions.during,protocolStart:_(r.filterOptions.startTime),protocolEnd:_(r.filterOptions.endTime)};await a.updateInfo(m),S.message({message:i("baseForm.form.submit.success"),status:"success"}),f()}else S.message({message:i("baseForm.form.submit.error"),status:"error"})}return(r,m)=>{const V=E("Breadcrumb");return c(),I("div",Q,[t(V,{items:["menu.user","menu.user.setting"]}),b("div",W,[m[0]||(m[0]=b("div",{class:"general-top"},null,-1)),b("div",A,[t(P,{ref_key:"setFormRef",ref:p},null,512),b("div",G,[t(e(x),{type:"primary","native-type":"submit",onClick:y},{default:l(()=>[B(h(r.$t("userSetting.save")),1)]),_:1}),t(e(x),{onClick:f},{default:l(()=>[B(h(r.$t("userSetting.cancel")),1)]),_:1})])])])])}}});const ge=R(K,[["__scopeId","data-v-1be17705"]]);export{ge as default};
