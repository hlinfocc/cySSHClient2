import{H as y,I as h,L as H,N as X,O as Y,M as V,Q as $,P as U,R as Z,b as k,d as L,c as B,r as A,l as n,U as u,u as o,i as M,J as g,W as C,p as G}from"./pinia-dfb2bf3c.js";import{x as Q,d as z,p as J,s as K,$ as W,a as x,b as ee,u as se,I as E,C as re,B as N,T as O,_ as S,r as oe,F as ae}from"./index-c77ef364.js";import{u as D,a as ne}from"./vue-c279faa6.js";import{F as b,a as j}from"./index-cda2b22d.js";import"./echarts4-8e4eed5b.js";import"./echarts-0ad49557.js";import"./axios-7a713374.js";import"./mitt-f7ef348c.js";import"./index-3e1553a6.js";const te=({emit:e,props:s,state:r})=>a=>{!r.disabled&&!s.href&&e("click",a)},le=["state","handleClick"],ie=(e,{inject:s,reactive:r,computed:a},{emit:t,parent:p})=>{p.tinyForm=p.tinyForm||s("form",null);const c=r({formDisabled:a(()=>(p.tinyForm||{}).disabled),disabled:a(()=>e.disabled||c.formDisabled),href:a(()=>Q.filterUrl(e.href))});return{state:c,handleClick:te({emit:t,props:e,state:c})}};function de(e,s){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=ue(e))||s&&e&&typeof e.length=="number"){r&&(e=r);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ue(e,s){if(e){if(typeof e=="string")return R(e,s);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?R(e,s):void 0}}function R(e,s){(s==null||s>e.length)&&(s=e.length);for(var r=0,a=Array(s);r<s;r++)a[r]=e[r];return a}var me=function(s,r){for(var a=s.__vccOpts||s,t=de(r),p;!(p=t()).done;){var c=p.value,l=c[0],f=c[1];a[l]=f}return a},pe=z({props:[].concat(J,["disabled","href","icon","type","underline","value"]),emits:["click"],setup:function(s,r){return K({props:s,context:r,renderless:ie,api:le})}}),ce=["href"],fe={key:1,class:"tiny-link__inner"},ge={key:2,class:"tiny-link__inner"};function _e(e,s,r,a,t,p){return y(),h("a",Z({class:["tiny-link","tiny-link--additional",e.type?"tiny-link--"+e.type:"",e.state.disabled&&"is-disabled",e.underline&&!e.state.disabled&&"is-underline"],href:e.state.disabled?null:e.state.href},e.a(e.$attrs,["^on[A-Z]"]),{rel:"noopener noreferrer",onClick:s[0]||(s[0]=function(){return e.handleClick&&e.handleClick.apply(e,arguments)})}),[e.icon?(y(),H(Y(e.icon),{key:0,class:X(["tiny-svg-size tiny-link-svg",{"tiny-link-svg-only":!(e.slots.default||e.value)}])},null,8,["class"])):V("v-if",!0),e.value?(y(),h("span",fe,$(e.value),1)):e.slots.default?(y(),h("span",ge,[U(e.$slots,"default")])):V("v-if",!0),e.slots.icon?U(e.$slots,"icon",{key:3}):V("v-if",!0)],16,ce)}var ve=me(pe,[["render",_e]]);function F(){return F=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},F.apply(null,arguments)}var ye=function(s){var r;return typeof process=="object"&&((r={})==null||r.TINY_MODE),ve},he=F({},W,{type:{type:String,default:"default"},value:String,underline:{type:Boolean,default:!0},href:String,icon:[Object,String],disabled:Boolean}),I=z({name:x+"Link",props:he,setup:function(s,r){return ee({props:s,context:r,template:ye})}}),we="3.19.0";I.install=function(e){e.component(I.name,I)};I.version=we;function q(e=!1){const s=k(e);return{loading:s,setLoading:t=>{s.value=t},toggle:()=>{s.value=!s.value}}}const be={class:"login-form-container"},$e={class:"login-form-options"},Ie=L({__name:"login-info",setup(e){const s=ne(),{t:r}=D(),{loading:a,setLoading:t}=q(),p=se(),c=k(),l=B(()=>({username:[{required:!0,message:r("login.form.userName.errMsg"),trigger:"change"}],password:[{required:!0,message:r("login.form.password.errMsg"),trigger:"change"}]})),f=A({username:"admin",password:"123456",rememberPassword:!0});M("handle");function T(){var _;(_=c.value)==null||_.validate(async w=>{if(w){t(!0);try{await p.login({account:f.username,password:f.password}),O.message({message:r("login.form.login.success"),status:"success"});const{redirect:v,...P}=s.currentRoute.value.query;console.log("redirect:>>>>>>",v),s.push({name:v||"Home",query:{...P}})}catch{}finally{t(!1)}}})}return(_,w)=>(y(),h("div",be,[n(o(j),{ref_key:"loginFormInfo",ref:c,model:f,class:"login-form",rules:l.value,"validate-type":"text","label-width":"0",size:"medium"},{default:u(()=>[n(o(b),{prop:"username",size:"medium"},{default:u(()=>[n(o(E),{modelValue:f.username,"onUpdate:modelValue":w[0]||(w[0]=v=>f.username=v),placeholder:_.$t("login.form.userName.placeholder")},null,8,["modelValue","placeholder"])]),_:1}),n(o(b),{prop:"password",size:"medium"},{default:u(()=>[n(o(E),{modelValue:f.password,"onUpdate:modelValue":w[1]||(w[1]=v=>f.password=v),type:"password","show-password":"",placeholder:_.$t("login.form.password.placeholder")},null,8,["modelValue","placeholder"])]),_:1}),g("div",$e,[n(o(re),null,{default:u(()=>[C($(_.$t("login.form.rememberPassword")),1)]),_:1}),g("div",null,[n(o(I),{type:"primary"},{default:u(()=>[C($(_.$t("login.form.forgetPassword")),1)]),_:1})])]),n(o(b),{size:"medium"},{default:u(()=>[n(o(N),{type:"primary",class:"login-form-btn",loading:o(a),onClick:T},{default:u(()=>[C($(_.$t("login.form.login")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])]))}});const ke=S(Ie,[["__scopeId","data-v-4c14db4b"]]),Ve={class:"login-register-container"},Ce={class:"login-form-options"},Ee=L({__name:"login-register",setup(e){const{t:s}=D(),{loading:r,setLoading:a}=q(),t=k(),p=M("handle"),c=()=>{p(!1)};let l=A({username:"",password:"",passwordConfirm:""}),f=k(!0);const T=(m,i,d)=>{/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/.test(i)?d():d(new Error(s("login.form.checkPassword")))},_=(m,i,d)=>{/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/.test(i)?d():d(new Error(s("login.form.checkUsername")))},w=(m,i,d)=>{l.password&&l.password!==i?d(new Error(s("login.form.confirmPassword"))):d()},v=B(()=>({username:[{required:!0,message:s("login.form.mailName.errMsg"),trigger:"blur"},{validator:_,trigger:"blur"}],password:[{required:!0,message:s("login.form.mailpassword.errMsg"),trigger:"blur"},{validator:T,trigger:"blur"}],passwordConfirm:[{required:!0,message:s("login.form.mailpassword2.errMsg"),trigger:"blur"},{validator:w,trigger:"blur"}]}));function P(){t.value.validate(async m=>{if(m){let i=A({username:l.username,password:l.password});await oe(i),O.message({message:s("login.form.registerPass"),status:"success"}),p(!1)}else O.message({message:s("login.form.registerError"),status:"warning"})})}return(m,i)=>(y(),h("div",Ve,[n(o(j),{ref_key:"ruleForm",ref:t,model:o(l),rules:v.value,"validate-on-rule-change":o(f),"label-align":!0,"label-position":"top","label-width":"100px"},{default:u(()=>[n(o(b),{label:m.$t("login.form.mailInput"),prop:"username",size:"medium"},{default:u(()=>[n(o(E),{modelValue:o(l).username,"onUpdate:modelValue":i[0]||(i[0]=d=>o(l).username=d),placeholder:m.$t("login.form.registerMail.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(o(b),{label:m.$t("login.form.passwordInput"),prop:"password",size:"medium"},{default:u(()=>[n(o(E),{modelValue:o(l).password,"onUpdate:modelValue":i[1]||(i[1]=d=>o(l).password=d),placeholder:m.$t("login.form.registerPassword.placeholder"),type:"password","show-password":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(o(b),{label:m.$t("login.form.passwordConfirm"),prop:"passwordConfirm",size:"medium"},{default:u(()=>[n(o(E),{modelValue:o(l).passwordConfirm,"onUpdate:modelValue":i[2]||(i[2]=d=>o(l).passwordConfirm=d),placeholder:m.$t("login.form.registerConfirmPassword.placeholder"),type:"password","show-password":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),g("div",Ce,[n(o(I),{type:"primary",onClick:c},{default:u(()=>[C($(m.$t("login.form.change")),1)]),_:1})]),n(o(b),{size:"medium"},{default:u(()=>[n(o(N),{type:"primary",class:"login-form-btn",loading:o(r),onClick:P},{default:u(()=>[C($(m.$t("login.form.register")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules","validate-on-rule-change"])]))}});const Le=S(Ee,[["__scopeId","data-v-99554533"]]),Se={class:"login-form-container"},Te={key:0},Pe={key:1},Ae=L({__name:"login-form",setup(e){k("first");let s=k(!1);return G("handle",a=>{s.value=a}),(a,t)=>(y(),h("div",Se,[t[0]||(t[0]=g("div",{class:"login-form-language"},null,-1)),o(s)?(y(),h("div",Te,[n(Le)])):V("",!0),o(s)?V("",!0):(y(),h("div",Pe,[n(ke)]))]))}});const Oe=S(Ae,[["__scopeId","data-v-c6cd779f"]]),Fe={class:"container-login"},Ue={class:"content"},Re={class:"login"},Be={class:"login-header"},Me={class:"login-logo"},ze={class:"login-logo-text"},Ne={class:"footer"},De=L({__name:"index",setup(e){const{VITE_GLOBAL_TITLE:s}={VITE_GLOBAL_TITLE:"沁芳Linux远程主机管理系统",VITE_BASE_URL:"/static/dist/",VITE_CONTEXT:"/csc/",VITE_BASE_API:"/",VITE_SERVER_HOST:"http://127.0.0.1:7001",VITE_USE_MOCK:"false",VITE_API_URL_PROXY_PREFIX:'[["/api", "http://127.0.0.1:31918/api"]]',BASE_URL:"/static/dist/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};return(r,a)=>(y(),h("div",Fe,[g("div",Ue,[g("div",Re,[g("div",Be,[g("div",Me,[g("span",ze,$(o(s)),1)]),a[0]||(a[0]=g("div",{class:"login-desc"},"用户登录中心（V1.0）",-1))]),n(Oe)])]),g("div",Ne,[n(ae)])]))}});const Ke=S(De,[["__scopeId","data-v-b90f4a49"]]);export{Ke as default};
