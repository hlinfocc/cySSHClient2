import{d as x,r as C,b as R,c as j,H as g,M as h,V as l,u as t,l as e,I as k,Z as N,F as E,B as q,J as b,X as $,R as w}from"./pinia-5d85bb97.js";import{I as y,n as J,T,_ as I,u as L,B}from"./index-a1dd1e86.js";import{g as _}from"./time-3f8879de.js";import{D as v,h as M}from"./head-b77e38b2.js";import{R as c,C as i}from"./index-3934ce68.js";import{F as u,a as z}from"./index-f54ce2d8.js";import{S as H,O as P}from"./index-909fcb5f.js";import{u as D}from"./vue-94d06e22.js";import"./echarts4-58d8fff6.js";import"./echarts-0ad49557.js";import"./axios-4d564c32.js";import"./mitt-f7ef348c.js";import"./index-f48abdc8.js";import"./chevron-up-93dc8628.js";import"./index-7f2dd367.js";const X=x({__name:"set-from",setup(U,{expose:m}){const d=[{value:"1",label:"social recruitment"},{value:"2",label:"scholl recruitment"},{value:"3",label:"Job transfer"}],a=C({filterOptions:{},department:"",position:[],type:[],date:[],during:"",startTime:"",endTime:""}),p=R(),{t:O}=D(),r={required:!0,trigger:"blur"},f={required:!0,message:"必选",trigger:"blur"},V=j(()=>({department:[r],position:[r],type:[f],date:[r],during:[r],startTime:[r],endTime:[r]})),S=()=>{var s,F;const n=(s=a.filterOptions.startTime)==null?void 0:s.getTime();((F=a.filterOptions.endTime)==null?void 0:F.getTime())<n&&(a.filterOptions.endTime="",T.message({message:O("userInfo.time.message"),status:"error"}))};return m({setData:()=>a,setFormValid:()=>{let n=!1;return p.value.validate(o=>{n=o}),n},setReset:()=>{a.filterOptions={}}}),(n,o)=>(g(),h(t(J),null,{default:l(()=>[e(t(z),{ref_key:"setFormRef",ref:p,model:a.filterOptions,rules:V.value,"label-width":"150px","label-align":!0,"label-position":"left",size:"small"},{default:l(()=>[e(t(c),{flex:!0,justify:"left"},{default:l(()=>[e(t(i),{span:5,"label-width":"100px"},{default:l(()=>[e(t(u),{label:n.$t("userSetting.department"),prop:"department"},{default:l(()=>[e(t(y),{modelValue:a.filterOptions.department,"onUpdate:modelValue":o[0]||(o[0]=s=>a.filterOptions.department=s)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(t(i),{span:5,"label-width":"100px"},{default:l(()=>[e(t(u),{label:n.$t("userSetting.position"),prop:"position"},{default:l(()=>[e(t(y),{modelValue:a.filterOptions.position,"onUpdate:modelValue":o[1]||(o[1]=s=>a.filterOptions.position=s)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),e(t(c),{flex:!0,justify:"left"},{default:l(()=>[e(t(i),{span:5,"label-width":"100px"},{default:l(()=>[e(t(u),{label:n.$t("userSetting.type"),prop:"type"},{default:l(()=>[e(t(H),{modelValue:a.filterOptions.type,"onUpdate:modelValue":o[2]||(o[2]=s=>a.filterOptions.type=s),placeholder:n.$t("baseForm.form.label.placeholder")},{default:l(()=>[(g(!0),k(E,null,N(d,s=>(g(),h(t(P),{key:s.value,label:n.$t(s.label),value:s.label},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(t(i),{span:5,"label-width":"100px"},{default:l(()=>[e(t(u),{label:n.$t("userSetting.date"),prop:"date"},{default:l(()=>[e(t(v),{modelValue:a.filterOptions.date,"onUpdate:modelValue":o[3]||(o[3]=s=>a.filterOptions.date=s),"unlink-panels":"",type:"daterange","range-separator":"-","start-placeholder":n.$t("userSetting.first"),"end-placeholder":n.$t("userSetting.last")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"])]),_:1})]),_:1}),e(t(c),{flex:!0,justify:"left"},{default:l(()=>[e(t(i),{span:5,"label-width":"100px"},{default:l(()=>[e(t(u),{label:n.$t("userSetting.during"),prop:"during"},{default:l(()=>[e(t(y),{modelValue:a.filterOptions.during,"onUpdate:modelValue":o[4]||(o[4]=s=>a.filterOptions.during=s)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(t(i),{span:5,"label-width":"100px"},{default:l(()=>[e(t(u),{label:n.$t("userSetting.startTime"),prop:"startTime"},{default:l(()=>[e(t(v),{modelValue:a.filterOptions.startTime,"onUpdate:modelValue":o[5]||(o[5]=s=>a.filterOptions.startTime=s),onBlur:S},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),e(t(c),{flex:!0,justify:"left"},{default:l(()=>[e(t(i),{span:5,"label-width":"100px"},{default:l(()=>[e(t(u),{label:n.$t("userSetting.endTime"),prop:"endTime"},{default:l(()=>[e(t(v),{modelValue:a.filterOptions.endTime,"onUpdate:modelValue":o[6]||(o[6]=s=>a.filterOptions.endTime=s),onBlur:S},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1}))}});const Y=I(X,[["__scopeId","data-v-0e48261b"]]),Z={class:"container-set"},A={class:"general-card"},G={class:"general-top"},K={class:"general-contain"},Q={class:"general-btn"},W=x({__name:"index",setup(U){const{t:m}=D(),d=R(),a=L();function p(){d.value.setReset()}async function O(){let r=d.value.setData();if(d.value.setFormValid()){let f={department:r.filterOptions.department,job:r.filterOptions.position,employeeType:r.filterOptions.type,probationStart:_(r.filterOptions.date[0]),probationEnd:_(r.filterOptions.date[1]),probationDuration:r.filterOptions.during,protocolStart:_(r.filterOptions.startTime),protocolEnd:_(r.filterOptions.endTime)};await a.updateInfo(f),T.message({message:m("baseForm.form.submit.success"),status:"success"}),p()}else T.message({message:m("baseForm.form.submit.error"),status:"error"})}return(r,f)=>{const V=q("Breadcrumb");return g(),k("div",Z,[e(V,{items:["menu.user","menu.user.setting"]}),b("div",A,[b("div",G,[e(M)]),b("div",K,[e(Y,{ref_key:"setFormRef",ref:d},null,512),b("div",Q,[e(t(B),{type:"primary","native-type":"submit",onClick:O},{default:l(()=>[$(w(r.$t("userSetting.save")),1)]),_:1}),e(t(B),{onClick:p},{default:l(()=>[$(w(r.$t("userSetting.cancel")),1)]),_:1})])])])])}}});const Oe=I(W,[["__scopeId","data-v-1616658a"]]);export{Oe as default};
